<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>随意拖动</title>
<meta name="description" content="">
<meta name="keywords" content="">
<link href="css/ " rel="stylesheet" type="text/css">
<style>
	.one1 {
		position:absolute;background-color:red;
	}
</style>
<body>
<input type="button" onclick="crea()" value="add">
<script>
    var down=false;
	var dx=0;
	var dy=0;
	var sx=0;
	var sy=0;
    var one=null;
    function crea()
    {   
        if(one!=null)
        return; 
        one=document.createElement("div");
        one.style.top="100px";
        one.style.left="100px";
        one.style.width="200px"
        one.style.height="30px"
        one.className="one1";
        document.body.appendChild(one);
        one.onmousedown=function(e)
	    {
		    var event=e||window.event;
            dx=event.clientX;
            dy=event.clientY;
            sx=parseInt(one.style.left);
            sy=parseInt(one.style.top);
            if(!down)
                down=true
	    }
	    one.onmouseup=function()
	    {
		    if(down)
			    down=false
	    }
    }
	//var one=document.getElementById("one");
	
	document.onmousemove=function(e)
	{
		var event=e||window.event;
		if(down)
		{
			one.style.top=event.clientY-(dy-sy);
		    one.style.left=event.clientX-(dx-sx);
		}
		
	}
	
</script>
</body>
</html>