如今的前端开发早已不用之前的刀耕火种的方式写代码了，项目开始时会考虑各种前端框架react vue angular等，然后就是用webpack搭建项目开发架构。开发完后我们会将webpack编译后的文件通过svn发到服务器上，这样很容易存在文件漏发，且多人参与发开易冲突等。经过多次开发实践，目前我们的项目采用jenkins+gitlab实现自动化编译与部署，这样简化了项目部署等问题，极大的减少了因代码发布而引起的bug数量。

### 自动化编译部署介绍




##### 参考文章

* [jenkins+gitlab自动化编译部署方案探索及服务端编译webpack实战](https://www.cnblogs.com/saysmy/p/8806975.html)
* [持续集成之Jenkins+Gitlab](https://blog.csdn.net/abcdocker/article/details/53840449)


### 本地搭建gitlab服务器
首先需要服务器的内存至少为4G，不然带不动会出现502错误
#### 安装依赖软件包
sudo yum -y install curl policycoreutils openssh-server openssh-clients postfix

##### 将SSH服务设置成开机自启动，并启动
sudo systemctl enable sshd  
sudo systemctl start sshd

##### 设置postfix开机自启，并启动，postfix支持gitlab发信功能
sudo systemctl enable postfix  
sudo systemctl start postfix

##### 打开系统防火墙HTTP
sudo firewall-cmd --permanent --add-service=http  
sudo systemctl reload firewalld

#### 添加GitLab镜像源并安装
vim /etc/yum.repos.d/gitlab_gitlab-ce.repo  
修改内容如下：  
```
[gitlab-ce]
name=gitlab-ce
baseurl=http://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el7
repo_gpgcheck=0
gpgcheck=0
enabled=1
gpgkey=https://packages.gitlab.com/gpg.key
```
##### 安装gitlab
sudo yum install gitlab-ce

#### 配置gitlab-ce
vim /etc/gitlab/gitlab.rb
```
external_url 'http://192.168.10.11' //服务器ip地址
unicorn['listen'] = '192.168.10.11'
unicorn['port'] = 9090
```


修改gitlab默认端口
cd /var/opt/gitlab/nginx/conf

listen *:3000;

gitlab-ctl reconfigure
gitlab-ctl restart

管理员的用户名为root，初始密码为5iveL!fe。登录后会要求重置密码  
至此gitlab服务器已搭建完成

### Jenkins 安装与配置
#### 添加yum repos，然后安装
```
sudo wget -O /etc/yum.repos.d/jenkins.repo http://pkg.jenkins-ci.org/redhat/jenkins.repo
sudo rpm --import https://jenkins-ci.org/redhat/jenkins-ci.org.key
sudo yum install jenkins
```
如果没有java的话要安装java  
```
sudo yum install java
```
修改配置文件
vim /etc/sysconfig/jenkins

JENKINS_PORT="8080"


启动和停止  
```
sudo service jenkins start/stop/restart
```