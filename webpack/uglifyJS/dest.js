!function(e){var a={};function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,a,t){i.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:t})},i.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(a,"a",a),a},i.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},i.p="",i(i.s=0)}([function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[!function(){var e=new Error('Cannot find module "common"');throw e.code="MODULE_NOT_FOUND",e}(),!function(){var e=new Error('Cannot find module "layer"');throw e.code="MODULE_NOT_FOUND",e}(),!function(){var e=new Error('Cannot find module "poshytip"');throw e.code="MODULE_NOT_FOUND",e}(),!function(){var e=new Error('Cannot find module "component"');throw e.code="MODULE_NOT_FOUND",e}(),!function(){var e=new Error('Cannot find module "slimscroll"');throw e.code="MODULE_NOT_FOUND",e}(),!function(){var e=new Error('Cannot find module "user"');throw e.code="MODULE_NOT_FOUND",e}(),!function(){var e=new Error('Cannot find module "lazyload"');throw e.code="MODULE_NOT_FOUND",e}()],__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var ruser=require("user"),common=require("common"),barrageObj;require("component")($),window.message=require("roomMessage"),window.room=require("room"),window.win_H=$(window).height(),window.win_W=$(window).width();var fplayer=null,vplayer=null,audioPlayerObj=[],config={activityBadge:[1129,1435,250969,261891,388941,141124,96775],superAdminBadge:[94356,107094,323314,106795],chatToUid:0,faces:[],player:{flashId:"GjFlashPlayer",videoId:"GjVideoPlayer",w:win_W<1278?710:868,h:win_W<1278?532.5:651},chat:{h:win_W<1278?361:480},siteKeyWords:(app.websiteId,"星光"),chatAreaSlimscroll:null,sendMedalLimit:!1,redPacketBoxGiftId:5};config.siteKeyWords=16==app.websiteUniqueId?"茶杯":config.siteKeyWords,window.rStatus={redPacket:{boxList:[],isCDing:!1,commandText:"派发宝箱的老板好帅"},bindPhoneTimeout:0};var roomInit=function(){initPlayer(),initGiftNumSelect(),initGifts(),initChatScrollBar(),initSendMsg(),initFaces(),initModeratorAvatarTip(),initChatNameTip(),initFamilyIconTip(),initChatInput(),initFollow(),initGuardList(),initNewWelfare(),initPrivateLetter(),initFeedback(),initHotRecommend(),initSigninTask(),initRedPacket(),initBroadcastCard(),initDownloadAi(),initGiftPackage(),activeIconPlayer(".entry-slide-con",".slide-wrap",1),app.isSocialRoom?(initGuestSelect(),initMultiVideo(),initMultiVideoAvatarTip(),initSocialAppDownloadLayer()):(initChatTab(),initConsumeRank(),initFansMedal(),setTimeout(function(){initPk(app.pk)},0),initHotRank(),activeIconPlayer(".activity-slide-con",".slide-wrap",1)),app.oneYuanFansBuy.canBuy&&!app.isSocialRoom&&initOneYuanfans(),!app.isPlaying&&app.uid!=app.mid||""!=app.isTi||initFlower(),resizeLayout(),window.onresize=function(){resizeLayout(),barrageObj&&barrageObj.resize()},$("img.lazy").show().lazyload(),$("body").on("click",function(e){$(".send_select_wrap ul").find($(e.target)).length<=0&&$(".select_arrow_icon").find($(e.target)).length<=0&&"select_arrow_icon"!==e.target.className&&($(".send_select_wrap ul").height("0"),$(".send_select_wrap").removeClass("on")),$(".timeZoneHotList_wrap").hide(function(){$(".hotList_icon").removeClass("active")})}),app.hasNewPkgGift&&$(".gifts_type > span").find("b").show(),$(".go_login").on("click",function(){ruser.showLoginPanel()}),""!=app.uid||app.banAutoLogin||autoLoginCountDown(5)},autoLoginCountDown=function(e){var a=e;if(0==a)return $(".user-layer").is(":visible")||ruser.showLoginPanel(),void autoLoginCountDown(5);a--,setTimeout(function(){autoLoginCountDown(a)},1e3)},initGiftNumSelect=function(){var e=$(".gn_list"),a=$(".gifts_num_select_wrap"),i=e.children().length;a.find(".select_arrow_icon").on("click",function(){a.hasClass("on")?(e.animate({height:"0px"},200),a.removeClass("on")):(e.animate({height:27*i+"px"},200),a.addClass("on")),$(".guest_selected").removeClass("on").find("ul").animate({height:"0px"},200)}),$(".gn_list").on("click","li",function(){var i=$(this).data("value");$("#propNum").val(i),e.animate({height:"0px"},100),a.removeClass("on")})},initConsumeRank=function(){1==app.showCostRank&&($(".rr_controller").find("li").eq(2).hide(),$(".rr_controller").find("li").css({width:"33.333%"})),$(".rr_controller").on("click","li",function(){var e=$(this);if(!e.hasClass("active")){$(".rr_controller li").removeClass(),e.addClass("active");var a=e.data("type");$.ajax({url:"/roomV5/getConsumeRank",data:{type:a,mid:app.mid},type:"GET",dataType:"JSON",beforeSend:function(){$(".rr_list").html('<img src="//static.guojiang.tv/pc/v3/img/common/loading.gif" style="width:15px;margin:35px auto 42px;display:block;"/>')},success:function(e){if(0==e.errno){var i=e.data,t=i.isFans,n="fans"==a?"":"none",o="fans"==a?i.list:i,s="",l="",c=o.length<10?o.length:10;$(".rr_list_other").html("");for(var r=0;r<c;r++){l=r<3?"":r+1;var p=getTrueNickName(o[r].nickname);s+='<li class="rr_list_'+(r+1)+'">                                    <span class="icon">'+l+'</span>                                    <span style="display:'+n+'" class="fans_medal_icon fans_level_icon_'+o[r].fansLevel+'">'+o[r].medalName+'</span>                                    <span class="level_icon u_level_icon_'+o[r].level+'"></span>                                    <span class="name ellipsis">'+p+'</span>                                    <span class="coin '+n+'">'+o[r].cost+"星光</span>                                </li>"}if($(".rr_list").html(s),"fans"==a){var d="";if(0==c)d='<div class="no-has-fans">还没有粉丝哦~</div>';else d='<div class="my-fans-info">                                                    <p>'+(t?"我的排名: <span>"+i.myRank+"</span>":"您还未获得该主播的粉丝徽章")+'<a class="fr" target="_blank" href="http://m.kuaishouvideo.com/dist/fans/rule.html">如何获得粉丝徽章?</a></p>                                                    <p>粉丝总人数：<span>'+i.totalFans+"</span></p>                                                  </div>";$(".rr_list_other").html(d)}}else $(".rr_list").html("")}})}})},initHotRank=function(){1==app.isPlaying&&app.isHotRoom&&($(".timeZoneHotList_btn").show(),initNewHotRankInfo(app.timeZoneHotListRankInfo))},initGifts=function(){getNormalGifts(),$(".show_all_gifts").on("click",function(e){e.stopPropagation(),toggleGiftsSelectBox()}),initGiftsSelect(),showGiftsTip(),$("#sendGift").on("click",function(){sendGifts()}),switchPanel()},toggleGiftsSelectBox=function(e){var a=$(".show_all_gifts").find("i"),i=$("#giftsAll"),t=$("#giftsSelected"),n=$(".gifts_ul_wrap"),o=($(".gifts_wrap"),n.find("li.active").data("index")),s=$("#giftsAll li"),l=$(".selected_panel"),c=$(".all_panel"),r=$(".gifts_wrap").width(),p=Math.ceil(r/62);if(a.hasClass("active")){a.removeClass("active");for(var d=18*parseInt(o/18),m="",f=d;f<d+18;f++){var u=n.find('li[data-index="'+f+'"]');if(0==u.length)break;m+=u.clone()[0].outerHTML}m=""==m?'<li class="space_img"></li>':m,t.html(m),c.css({height:"77px"}),c.hide(),l.show(),t.show()}else if(!e){var _=62*Math.ceil(s.length/p)+15+"px";a.addClass("active"),l.hide(),t.hide(),i.show(),c.show().css({height:_})}},switchPanel=function(){$(".gifts_type").on("click","span",function(e){e.stopPropagation();var a=$(this).data("target");$(".gifts_type span").removeClass("active"),$(".gifts_type span[data-target='"+a+"']").addClass("active"),"normal"==a?""==app.gifts?getNormalGifts():showGiftsList(app.gifts,app.isGuard,a):"backpack"==a?(getBackpackGifts(a),$(".gifts_type > span").find("b").hide()):"guard"==a?""==app.guardGifts?getGuardGifts(a):showGiftsList(app.guardGifts,app.isGuard,a):"fans"==a&&showGiftsList(app.fansGifts,!1,a)})},initChatScrollBar=function(){config.chatAreaSlimscroll=new $("#chatArea").off("slimscroll").slimscroll({height:config.chat.h+"px",alwaysVisible:!0,color:"#898989",start:"bottom"}),bindChatAreaEvent()},initAdminScrollBar=function(){$("#rAdmin").slimscroll({height:config.chat.h+"px",alwaysVisible:!0,color:"#898989"})},initSendMsg=function(){$("#sendMsg").click(sendMsg),$("#msgTextarea").keydown(function(e){if(13==e.which){if(sendMsg(),!e||!e.preventDefault)return window.event.returnValue=!1,!1;e.preventDefault()}}),switchChatToAll()},initFlower=function(){$(".va_flower_wrap").show(),$("#flower").on("click",function(){""!=app.uid?sendFlower(!0):ruser.showLoginPanel()})},initGiftsSelect=function(){$(".gifts_wrap").off().on("click","li:not(.space_img)",function(){var e=$(this),a=e.data("index");"guard"==$(".gifts_wrap .gifts_type span.active").attr("data-target")&&0!=e.find(".mask").length&&showGuardHome();var i=$(".gifts_wrap");i.find("li").removeClass("active"),i.find('li[data-index="'+a+'"]').addClass("active"),e.data("type")==config.redPacketBoxGiftId&&require.async("redPacket",function(e){e.showSetCommand()})})},checkboxFill=function(e,a){var i=a,t=e[0];if(document.selection)t.focus(),document.selection.createRange().text=i,t.focus();else if(t.selectionStart||"0"==t.selectionStart){var n=t.selectionStart,o=t.selectionEnd,s=o;t.value=t.value.substring(0,n)+i+t.value.substring(o,t.value.length),s+=i.length,t.focus(),t.selectionStart=s,t.selectionEnd=s}else t.value+=i,t.focus()},initFaces=function(){for(var e=["1f603","1f60d","1f614","1f633","1f604","1f612","1f616","1f61c","263a","1f601","1f613","1f60a","1f630","1f631","1f61e","1f621","1f62d","1f602","1f618","1f623","1f61a","1f61c","1f609","1f632","1f625","1f60c","1f637","1f47d","2764","1f494","1f44f","1f44a","1f44c","1f44d","1f44e","1f48b","1f414","1f40f","1f43b","1f437","1f418","1f412","1f42f","1f430","1f433","1f436","1f446","1f447","1f449","1f448","1f48a","1f35e","1f353","1f34c","1f34e","1f345","1f349","1f366","1f361","26a1","2600","1f319","1f31a","1f31d","1f375","1f37c","1f335","1f4a9","1f4a8","1f648"],a=["[大笑]","[色]","[失望]","[脸红]","[开心]","[嫌弃]","[呸]","[吐舌]","[热情]","[露齿笑]","[汗]","[笑脸]","[担心]","[恐惧]","[低落]","[生气]","[哭]","[破涕为笑]","[飞吻]","[悔恨]","[亲吻]","[鬼脸]","[眨眼]","[晕]","[焦虑]","[满意]","[生病]","[外星人]","[心]","[心碎]","[喝彩]","[拳头]","[好的]","[强]","[弱]","[红唇]","[鸡]","[羊]","[熊]","[猪]","[象]","[猴]","[虎]","[兔]","[鲸鱼]","[狗]","[上]","[下]","[右]","[左]","[药丸]","[面包]","[草莓]","[香蕉]","[苹果]","[西红柿]","[西瓜]","[冰激凌]","[丸子]","[闪电]","[晴天]","[月亮]","[日全食]","[太阳]","[茶]","[奶瓶]","[仙人掌]","[便便]","[吹气]","[非礼勿视]"],i=0;i<70;i++)config.faces.push({img:"//static.guojiang.tv/pc/v3/img/face/emoji_"+e[i]+".png",data:a[i]});$("#facesBox").slimscroll({height:"224px",width:"289px",alwaysVisible:!0,color:"#898989"});var t=$(".faces_box_wrap"),n="";for(i=0;i<e.length;i++){n+='<li data-index="'+i+'"><img class= "lazyload_emoji" src="" data-original="'+("//static.guojiang.tv/pc/v3/img/face/emoji_"+e[i]+".png")+'"/></li>'}t.find("ul").append(n),$(".lazyload_emoji").show().lazyload({effect:"fadeIn",event:"sporty"}),$("#faceIcon").on("click",function(){if(""!=app.uid){$(".lazyload_emoji").trigger("sporty");var e=$(this);e.hasClass("on")?(t.hide(),e.removeClass("on")):(t.show(),e.addClass("on"))}else ruser.showLoginPanel()}),t.find("ul").on("click","li",function(){var e=$(this).data("index");checkboxFill($("#msgTextarea"),a[e]),t.hide(),$("#faceIcon").removeClass("on")})},initPlayer=function(){!app.isPlaying&&app.uid!==app.mid||"1"==app.isTi?(showRecommendPlaying(),"1"==app.isTi&&$(".va_rest .title").text("您已被主播踢出直播间")):app.isSocialAudioRoom?(initAudioPlayer(),initAudioNumBg()):has_flash()?initFlashPlayer():supportMSEH264Playback()?initH5Player():initFlashPlayer();$(".player_wrap").fadeIn(1e3)},supportMSEH264Playback=function(){var e=!!window.ActiveXObject||"ActiveXObject"in window,a=window.navigator.userAgent.indexOf("Edge")>-1&&!e;return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')&&!e&&!a},isVideoRoom=function(){return!(0==$("#GjPlayer").find("video").length&&!app.isSocialAudioRoom)},initFlashPlayer=function(){has_flash()?require.async(["flashPlayer","playerController"],function(e,a){var i=app.mInfo.m.head_pic_1;app.isSocialRoom&&(i="https://static.guojiang.tv/pc/v3/img/room/player_bg_2.png"),new a("flash",fplayer=new e({url:common.decodeHash(app.video.rtmpPullUrl),uid:app.uid,rid:app.rid,sid:app.video.sid,uType:app.uType,headPic:i,isPlaying:app.isPlaying,websiteId:app.websiteId,playerWrapId:"GjPlayer",playerId:config.player.flashId}))}):$(".no_flash").show()},initH5Player=function(){var e=app.mInfo.m.head_pic_1;app.isSocialRoom&&(e="https://static.guojiang.tv/pc/v3/img/room/player_bg.png"),require.async(["h5Player","playerController"],function(a,i){new i("h5",vplayer=new a({url:common.decodeHash(app.video.videoPlayFlv),headPic:e,playerWrapId:"GjPlayer",playerId:config.player.videoId,switchToFlashCallback:function(){initFlashPlayer()}})),vplayer.barrageObj(function(e){barrageObj=e})})},initAudioPlayer=function(){setTimeout(()=>{var e=$("#mamCanvas1").width();$(".mam_avatar_brave").attr("width",e),$(".mam_avatar_brave").attr("height",e)},100),require.async(["flvAudioPlayer","playerController"],function(e,a){let i=getAudioAvatarWidth()/2;audioPlayerObj[0]=new e({url:`http://hdl.wsdemo.zego.im/livestream/zegotest-2854705954-${app.mid}.flv`,mountId:"mamCanvas1",r:i,colors:["#fff"],setVolumeCallback:function(e){syncVolume(e)}}),new a("h5",audioPlayerObj[0]),audioPlayerObj[0].barrageObj(function(e){barrageObj=e})})},initFollow=function(){var e=!0;$(".follow_m").click(function(){if(e){if(e=!1,app.isAttention)return cancelAttention(),e=!0,!1;var a=$(this);$.ajax({url:"/roomV5/follow/mid/"+app.mid,dataType:"json",success:function(i){e=!0,i.errno!=NOT_LOGIN_ERR?0==i.errno?"love"==i.data.action?(a.addClass("on"),a.html("已关注"),app.isAttention=!0,$(".follow_hint").hide(),$("#attention-span").remove(),window.clearTimeout(_cancelTimer),initAttentionLayer(),message.sendData("userAttention")):(app.isAttention=!1,initAttentionBtn()):layer.alert(i.msg):ruser.showLoginPanel()}})}}),$(".follow_m.on").hover(function(){$(this).hasClass("on")&&$(this).html("取消关注")},function(){$(this).hasClass("on")&&$(this).html("已关注")}),initAttentionBtn()},showGiftsTip=function(){var e={115:"<small>据说喜欢吃棒棒糖的人嘴都很大</small>",116:'<small>在常规使用下，是富有营养的水果</small><P class="desc">流光效果：一次赠送10个及以上触发1级流光，不同数量区间可触发不同等级流光</p>',117:'<small>月黑风高夜，正是用纸巾的好时候</small><P class="desc">流光效果：一次赠送4个及以上触发1级流光，不同数量区间可触发不同等级流光',118:'<small>每一颗巧克力都包含着满满的心意啊</small><P class="desc">流光效果：赠送即可触发3级流光，不同数量区间可触发不同等级流光</p>',119:"<small><small></p></p>",120:'<small>坐上这辆车，让我们红尘作伴，潇潇洒洒</small><p  class="desc">动效：高级礼物，送出即有炫酷动效</p><P class="desc">流光效果：赠送即可触发最高等级流光</p>',125:'<small>我和你之间就是一张机票的距离</small><p  class="desc">动效：高级礼物，送出即有炫酷动效</p><P class="desc">流光效果：赠送即可触发最高等级流光</p>',128:'<small>只一眼就是天长地久</small><p  class="desc">动效：高级礼物，送出即有炫酷动效</p><P class="desc">流光效果：赠送即可触发6级流光，不同数量区间可触发不同等级流光</p>',121:'<small>每天都需要药丸来压制体内的洪荒之力</small><P class="desc">流光效果：一次赠送4个及以上触发1级流光，不同数量区间可触发不同等级流光</p>',122:'<small>堪比金坷垃的生化武器，效果超群</small><P class="desc">流光效果：一次赠送2个及以上触发1级流光，不同数量区间可触发不同等级流光</p>',131:'<small>靠着外表混迹萌物界多年的人气明星，内心其实十分剽悍</small><p  class="desc">动效：高级礼物，送出即有炫酷动效</p><P class="desc">流光效果：一次赠送10个及以上即可触发流光，不同数量区间可触发不同流光</p>',124:'<small>干了这杯，还有三杯</small><P class="desc">流光效果：赠送即可触发5级流光，不同数量区间可触发不同等级流光</p>',130:'<small>喜欢你的笑，喜欢你身上是我香水的味道</small><p  class="desc">动效：高级礼物，送出即有炫酷动效</p><P class="desc">流光效果：赠送即可触发6级流光，不同数量区间可触发不同等级流光</p>',126:'<small>收下这个戒指，让我们的革命友谊升华一下 </small><P class="desc">动效：高级礼物，送出即有炫酷动效</p><p class="desc">流光效果：赠送即可触发最高等级流光</p>',127:'<small>转动命运的轮盘，月圆之夜可能开启神奇大门</small><p  class="desc">动效：高级礼物，送出即有炫酷动效</p><P class="desc">流光效果：赠送即可触发6级流光，不同数量区间可触发不同等级流光</p>',129:'<small>不用卖肾也能买的苹果7</small><P class="desc">流光效果：一次赠送2个及以上触发1级流光，不同数量区间可触发不同等级流光</p>',132:'<small>生日必备佳品，也可作为零食日常食用</small><P class="desc">流光：赠送即可触发4级流光，不同数量区间可触发不同等级流光</p>',280:"<small>能够捡起这块肥皂的人，都是真正的勇士</small>",279:"<small>据说喜欢吃棒棒糖的人嘴都很大</small>",277:"<small>一根清新黄瓜，驱散污浊之气</small>",97:'<small>很好，你成功的吸引了我的注意</small><P class="desc">流光效果：赠送即可触发4级流光，不同数量区间可触发不同等级流光</p>',282:"<small>给你一个吻~噢~可以不可以</small>",313:'<small>我能想到最浪漫的事，就是带你一起环游世界</small><p  class="desc">动效：高级礼物，送出即有炫酷动效</p>',291:'<small>坐上这辆车，让我们红尘作伴，潇潇洒洒</small><p  class="desc">动效：高级礼物，送出即有炫酷动效</p>',240:'<small>我和你之间就是一张机票的距离</small><p  class="desc">动效：高级礼物，送出即有炫酷动效</p>',110:'<small>只一眼就是天长地久</small><p  class="desc">动效：高级礼物，送出即有炫酷动效</p>',95:"<small>每天都需要药丸来压制体内的洪荒之力</small>",104:"<small>堪比金坷垃的生化武器，效果超群</small>",306:"<small>靠着外表混迹萌物界多年的人气明星，内心其实十分剽悍</small>",285:"<small>甜心蛋糕，做我永远的小甜心</small>",295:'<small>喜欢你的笑，喜欢你身上是我香水的味道</small><p  class="desc">动效：高级礼物，送出即有炫酷动效</p>',312:'<small>比陆地更宽广的是海洋，比海洋更深沉的是我的心 </small><P class="desc">动效：高级礼物，送出即有炫酷动效</p>',314:"<small>穿上这双鞋，你就是我的公举</small>",111:"<small>不用卖肾也能买的苹果7</small>",114:"<small>带来幸运并能让人笑口常开的魔力气球</small>",268:"<small>连送该礼物最高可获得100倍克拉返利，赠送时主播可获得30%分成</small>",193:'<small>这是一艘永不沉没的爱情巨轮</small><P class="desc">动效：高级礼物，送出即有炫酷动效</p>',270:'<small>据说长得好看的人，都住在城堡里</small><P class="desc">动效：高级礼物，送出即有炫酷动效</p>',296:"<small>此礼物用于提升主播热门排名，效果是普通礼物的两倍，但不参与分成</small>",297:"<small>此礼物用于提升主播热门排名，效果是普通礼物的两倍，但不参与分成</small>",197:'<small>此礼物用于提升主播热门排名，效果是普通礼物的2倍，但不参与分成</small><P class="desc">流光效果：赠送即可触发1级流光，不同数量区间可触发不同等级流光</p>',212:'<small>送出即可触发全站广播，并派发红包大奖</small><P class="desc">动效：高级礼物，送出即有炫酷动效</p>',252:"<small>送该礼物最高可获得100倍克拉返利，主播可获得30%分成</small>",525:"<small>送出即可获得主播粉丝徽章</small>",526:"<small>粉丝专属礼物仅限当日使用，主播不参与分成</small>",292:'<small>掐指一算，你需要一场说走就走的旅行</small><P class="desc">动效：高级礼物，送出即有炫酷动效</p>',293:'<small>拥有一双水晶鞋，蜕变成小仙女</small><P class="desc">动效：高级礼物，送出即有炫酷动效</p>',294:'<small>绝世珍宝，独一无二的海洋之心</small><P class="desc">动效：高级礼物，送出即有炫酷动效</p>',290:'<small>站着别动，我乘南瓜马车来接你</small><P class="desc">动效：高级礼物，送出即有炫酷动效</p>',9991:'<P class="desc">赠送后触发全站直播间广播，并派发宝箱物品</p>'},a={},i={550:"<small>粉丝专属礼物，快送给主播求签名吧</small>",551:"<small>举起灯牌，一起摇摆</small>",552:"<small>我要为你疯狂打call</small>",553:"<small>你可能会上电视</small>",554:'<small>嘿，该你上场了</small><P class="desc">动效：高级礼物，送出即有炫酷动效</p>',554:'<small>颁个小金人，拿个奥斯卡，在戏精的路上越走越远</small><P class="desc">动效：高级礼物，送出即有炫酷动效</p>',555:'<small>嘿，该你上场了</small><P class="desc">动效：高级礼物，送出即有炫酷动效</p>',556:'<small>都憋说了，先爆个灯</small><P class="desc">动效：高级礼物，送出即有炫酷动效</p>',557:'<small>你这么优秀，地球人都知道</small><P class="desc">动效：高级礼物，送出即有炫酷动效</p>',558:'<small>女神，可以接受一下我的膜拜吗</small><P class="desc">动效：高级礼物，送出即有炫酷动效</p>'};$(".gifts_ul_wrap li:not(.space_img)").poshytip({className:"tip-gifts",showOn:"hover",allowTipHover:!0,alignTo:"target",alignX:"center",alignY:"top",showTimeout:1,offsetY:12,keepInViewport:!0,liveEvents:!0,slide:!1,fade:!1,content:function(t){var n,o=$(".gifts_type span.active").attr("data-target"),s=$(this).data("index"),l=$(this).data("type"),c=$(this).data("id"),r="",p=$(this).data("desc"),d=[];if("normal"==o?d=app.gifts:"backpack"==o?d=app.backpackGifts:"guard"==o?d=app.guardGifts:"fans"==o&&(d=app.fansGifts),"normal"==o){var m=d[s].id;l==config.redPacketBoxGiftId&&(m=9991),n=""!=d[s].description?"<small>"+d[s].description+"</small>":e[m]?e[m]:""}else if("backpack"==o){n=e[d[s].pid]?e[d[s].pid]:"",r='<span class = "backpack_num">x'+(d[s].num?d[s].num:" ")+"</span>"}else"guard"==o?(n=a[d[s].id]?a[d[s].id]:"",app.isGuard?"":'<button class="tip_open_guard" onclick="room.showGuardHome()">开通守护</button>'):"fans"==o&&(n=p?d[s].description:i[c]);""!=d[s].description&&(n="<small>"+d[s].description+"</small>");var f=""==app.uid?"":"<span>现有克拉 <i>"+app.uInfo.coin+"</i></span>",u="";return void 0!=s&&(u="fans"==o&&"false"==app.isModFans?'                                <div class="gi_wrap clearfix">                                    <div class="fl gi_info fans_tip">                                        <p>送出<span>'+app.medalList.fansGift+'</span>获得主播粉丝徽章，<br/>即可使用粉丝团专属礼物</p>                                        <span class="be_fan_btn" onClick="room.beFansAction()">一键成为粉丝</span>                                    </div>                                </div>':'                                <div class="gi_wrap clearfix">                                    <img src="'+common.filterHttp(d[s].imgPreview)+'" class="fl"/>                                    <div class="fl gi_info">                                        <p class="title">'+d[s].name+"<span>"+r+d[s].price+"克拉</span>                                        </p>                                        "+n+'                                        <div class="clearfix gi_info_wrap">                                            '+f+'                                            <a href="/recharge/center" target="_blank">充值 <i class="right_arrow_pink"></i></a>                                        </div>                                    </div>                                </div>'),u}})},sendGifts=function(){var e=$(".gifts_wrap li.active"),a=$(".gifts_type span[data-target='backpack']").hasClass("active");if(0!=e.length){var i=$("#propNum"),t=i.gjRegExpTest({type:"number",content:i.val()});if(t.code){var n=parseInt(i.val()),o=e.data("id"),s=e.data("bpid"),l=e.data("type");525==o&&app.medalList.leftMedal<=0&&0==app.medalList.cu&&!config.sendMedalLimit?room.limitSendFansGift():5==l?room.sendRedPacketGift(o,n,rStatus.redPacket.commandText,s):room.sendNormalGifts(o,n,s),a&&(app.backpackGifts[e.index()].num,i.val())}else layer.alert(t.msg,{title:!1})}else layer.alert("请先选择礼物",{title:!1})},initModeratorAvatarTip=function(){var e,a=1==app.mIsVip?'<span class="icon_V"></span>':"",i=["0","5000","15000","30000","60000","100000","200000","350000","550000","800000","1100000","1600000","2200000","3000000","4000000","6000000","9000000","13000000","18000000","25000000","35000000","50000000","66000000","84000000","104000000","134000000","174000000","224000000","294000000","394000000","520000000","660000000","800000000","950000000","1100000000","1260000000","1420000000","2000000000","3000000000","4000000000","5000000000"];!function a(){if(app.mInfo.m.mod_next_level_need_more<0){app.mInfo.m.mod_level++,app.mInfo.m.mod_next_level++;var t=i[app.mInfo.m.mod_next_level]-i[app.mInfo.m.mod_level];app.mInfo.m.mod_next_level_need_more+=t,a()}else{t=i[app.mInfo.m.mod_next_level]-i[app.mInfo.m.mod_level];e=(t-app.mInfo.m.mod_next_level_need_more)/t}}(),$(".vm_t_desc .m_level_icon").removeClass().addClass("level_icon m_level_icon_"+app.mInfo.m.mod_level+" m_level_icon");var t="";app.mInfo.modPutOnMedalInfo&&(t='<span class="fans_medal_icon fans_level_icon_'+app.mInfo.modPutOnMedalInfo.level+'">'+app.mInfo.modPutOnMedalInfo.medal+"</span>");var n=getTrueNickName(app.mInfo.m.nickname),o='                    <div class="mt_content">                        <em class="arrow"></em>                        <div class="mt_top">                            <div class="avatar_wrap">                                <img src="'+common.filterHttp(app.mInfo.m.head_pic_1)+'"/>'+a+'                            </div>                            <p class="nickname">'+n+' <span class="level_icon m_level_icon_'+app.mInfo.m.mod_level+'"></span>'+t+'</p>                            <p class="id_num">ID：'+app.fuid+'</p>                            <p class="upgrade">还差'+app.mInfo.m.mod_next_level_need_more+'克拉升级</p>                            <div class="process_bg">                                <p class="process_bar" style="width:'+100*e+'%"></p>                            </div>                        </div>                        <p class="mt_bottom">签名：'+app.mInfo.m.signature+"</p>                     </div>";$(".vc_avatar").poshytip({className:"tip-m-avatar",allowTipHover:!1,alignTo:"target",alignY:"bottom",alignX:"inner-left",offsetX:-4,showTimeout:1,content:o})},initFamilyIconTip=function(){$(".family_icon").poshytip({className:"tip_family_medal",allowTipHover:!1,alignTo:"target",alignY:"top",alignX:"inner-left",offsetX:0,offsetY:3,showTimeout:1,liveEvents:!0,content:'<div class="family_medal_hint_wrap clearfix">                    <div class="fmh_qcpde_wrap fl">                        <img src="//static.guojiang.tv/pc/v3/img/common/xg_download.png" class="fmh_qcode">                        <span class="fmh_crown"></span>                    </div>                    <div class="fmh_font_wrap fl">                        <p>有了家族后可以组队刷美女直播，<br>威武霸气，快<span>下载APP</span>加入家族吧！</p>                    </div>                </div>'})},initChatNameTip=function(e,a,i,t){var n=a||"click",o=e||"rname",s=i?"right":"center",l=t?"center":"bottom",c=e?10:-30,r=e?"side-tip":"tip-m-avatar",p='                    <div class="mt_content">                        <em class="arrow"></em>                        <div class="mt_top">                            <div class="avatar_wrap">                                <img src="//static.guojiang.tv/pc/v3/img/common/avatar.png"/>                            </div>                            <p class="nickname"></p>                            <p class="id_num">'+config.siteKeyWords+'ID：数据查询中...</p>                            <img src="//static.guojiang.tv/pc/v3/img/common/loading3.gif" class="loading"/>                        </div>                        <p class="mt_bottom"></p>                     </div>';$("."+o).poshytip({className:r,showOn:n,alignTo:"target",alignX:s,alignY:l,offsetX:c,allowTipHover:!0,keepInViewport:!0,liveEvents:!0,content:p,callback:function(e){showAvatarInfo($(e).data("uid"),$(e))}})},initChatInput=function(){$(".r_chat_close").on("click",function(){switchChatToAll()})},initChatTab=function(){$(".r_chat_controller").on("click","li",function(){0==$(this).index()?switchToChat():switchToAdmin()})},resizeLayout=function(){var e=void 0===window.innerWidth?$(window).width():window.innerWidth,a=e>1440?90:25,i=0;void 0!==window.innerWidth&&(i=window.innerWidth-$(window).width()),e<1200+i+2*a&&(e=1200+i+2*a);var t=380;e<=1440&&(t=330);var n=e-2*a-t-10-i,o=parseInt(n),s=parseInt(9*o/16),l=88+s-310;config.chat.h=l,config.player.w=o,config.player.h=s-84,$(".player_wrap").height(config.player.h+"px"),$(".video_area").width(o+"px").height(s+"px"),$(".special_effect_wrap").height(config.player.h),$(".r_chat_area").height(config.chat.h+"px"),$(".va_controller").width(o-40+"px"),initChatScrollBar();var c=631*config.player.h/665;$(".multi_social").width(c+"px").css("margin-left","-"+c/2+"px");var r=n-$(".send_btn_wrap").width()-10-18;r-=r%62,$(".gifts_wrap").width(r+"px");var p=$(".all_panel");if(p.is(":visible")){var d=Math.ceil(r/62),m=$("#giftsAll li"),f=62*Math.ceil(m.length/d)+23+"px";p.show().css({height:f})}$("#giftsSelected, .show_all_gifts_wrap").show(),app.isSocialAudioRoom&&initAudioNumBg()},initGuardList=function(){var e=["白羊座","金牛座","双子座","巨蟹座","狮子座","处女座","天秤座","天蝎座","射手座","摩羯座","水瓶座","双鱼座"],a="";$.ajaxSetup({cache:!1}),$.ajax({url:"/roomV5/getGuardersInfo",data:{mid:app.mid},dataType:"JSON",type:"GET",success:function(i){var t=(i=i.data).length;0==t&&($(".guard_head").css({bottom:30}),$(".show-more-guard").hide()),app.guardInfo=i;for(var n=0;n<t;n++)if(n<t){var o=1==i[n].timeType?'<span class="year_icon"></span>':"",s=1==i[n].timeType?"year":"";a+='<li class="r_hover_name guarders_li '+s+'" data-uid="'+i[n].uid+'">                                    <img src="'+common.filterHttp(i[n].head_pic_1)+'" />'+o+'                                    <span class="guard_medal_icon guard_medal_icon_'+i[n].type+'" title="'+e[i[n].type]+'"></span>                                </li>'}else a+="<li></li>";$(".guard_list_wrap ul").html("").append(a),0!=t&&initChatNameTip("r_hover_name","hover")}}),$(".open_guard").on("click",function(){showGuardHome()}),$(".guard_list_wrap ul").on("click","li",function(){showGuardHome()}),$(".guard_list_wrap").on("click",".show-more-guard",function(){showGuardHome()})},initHintLayer=function(){app.isAttention||setTimeout(function(){$(".follow_hint").fadeIn(),$(".follow_hint .close").on("click",function(){$(this).closest(".follow_hint").hide()})},12e4)},initNewWelfare=function(){$(".new_welfare_entry, .show_newwelfare_btn, .vc_advert").on("click",function(e){""!=app.uid?("new_welfare_entry"==e.currentTarget.className?_czc.push(["_trackEvent","web:"+app.websiteUniqueId+" 新手福利按钮","新手福利"]):_czc.push(["_trackEvent","web:"+app.websiteUniqueId+" 新手福利banner","新手福利"]),require.async("newWelfare",function(e){e.showNewWelfare()})):ruser.showLoginPanel()}),-1!=app.countDownTime&&goNewWelfareCountDown(app.countDownTime)},initNewWelfareHintClose=function(){$(".newWelfare_hint .close").off().on("click",function(){$(".newWelfare_hint").hide()})},initPrivateLetter=function(){$(".private_letter").on("click","span",function(){$(".pop_up_box_2").show(),_czc.push(["_trackEvent","web直播间","点击私聊"])}),$(".close_btn_2").on("click",function(){$(".pop_up_box_2").hide()})},initFeedback=function(){var e;$(".feedback_entry").hover(function(){e=layer.tips("意见反馈",".feedback_entry",{tips:[3,"#1e1f15"]})},function(){layer.close(e)}),$(".video_area").on("click",".feedback_entry",function(){_czc.push(["_trackEvent","pc意见反馈","入口按钮点击"]),require.async("feedback",function(e){e.showLayer()})})},initSigninTask=function(){$(".video_area").on("click",".daily_task",function(){require.async("dailyTask",function(e){e.dailyTask()})})},initFansMedal=function(){$(".fans-entry").mouseenter(function(){if(""==app.uid)return ruser.showLoginPanel(),!1;0==$(".fans-container-wrap").html().length?require.async("fansMedal",function(e){e.showFansLayer(app.medalList,app.mid)}):$(".fans-container").show()})},initRedPacket=function(){app.boxList.length>0&&initRedPacketBox(app.boxList),$(".word_redpacket_entry").hover(function(){if(rStatus.redPacket.isCDing?$(this).find(".desc").removeClass("desc_open"):$(this).find(".desc").addClass("desc_open"),rStatus.redPacket.boxList[0]){var e=$(".box_hint_layer");e.find(".avatar").attr("src",rStatus.redPacket.boxList[0].headPic),e.find(".desc h3").text(rStatus.redPacket.boxList[0].nickname),e.show()}},function(){$(".box_hint_layer").hide()}),$(".redpacket_box_wrap").on("click",function(){""!=app.uid?require.async("redPacket",function(e){rStatus.redPacket.isCDing?e.showCopyCommand():rStatus.redPacket.boxList[0]?e.openBox(rStatus.redPacket.boxList[0].boxId):layer.alert("没有可用的宝箱")}):ruser.showLoginPanel()})},initRedPacketBox=function(e){require.async("redPacket",function(a){for(var i=0;i<e.length;i++)e[i].startCdTime="undefined"==typeof globalCdNum?0:globalCdNum;a.initBox(e)})},initBroadcastCard=function(){$(".broadcastCard-entry").click(function(){0==$(".broadcastCard-container-wrap").html().length?require.async("broadcastCard",function(e){e.showBroadcastCardLayer(app.userBroadcastCard)}):$(".broadcastCard-container").show()})},initDownloadAi=function(){var e=$(".dh_entrance span"),a=$(".download_hint_2 .dh_innerwrap");e.mouseenter(function(){a.show()}),e.mouseleave(function(){a.hide()}),setTimeout(function(){bodymovin.loadAnimation({wrapper:document.getElementById("dh_icon"),animType:"svg",loop:!1,autoplay:!0,path:"//static.guojiang.tv/pc/v3/img/room/svg/download/data.json"})},1e4)},initOneYuanfans=function(){var e=1e3*app.oneYuanFansBuy.timeWait;setTimeout(function(){require.async("oneYuanFuns",function(e){e.timeLoadOneYuanFuns()})},e)},initGiftPackage=function(){app.uid&&app.uid!=location.pathname.slice(1)&&app.welfareBox&&app.welfareBox.show&&require.async("giftPackage",function(e){if(app.welfareBox.pcAnimationJsonUrl)var a=setTimeout(function(){e.play(),clearTimeout(a)},1e3*app.welfareBox.timeWait);else $(".giftPackage").removeClass("hide")})},initGuestSelect=function(){$(".guest_selected .select_arrow_icon").on("click",function(){var e=$(".guest_selected"),a=$(".gs_list"),i=a.children().length;e.hasClass("on")?(a.animate({height:"0px"},200),e.removeClass("on")):(a.animate({height:38*i+"px"},200),e.addClass("on")),$(".gifts_num_select_wrap").removeClass("on").find("ul").animate({height:"0px"},200)}),$(".guest_selected ul").on("click","li",function(){$(".gs_desc").text($(this).text()),$(".gs_desc").attr("data-mid",$(this).attr("data-mid")),$(".gs_desc").attr("data-pos",$(this).attr("data-pos")),$(".guest_selected").removeClass("on").find("ul").animate({height:"0px"},200)})},initMultiVideo=function(){$(".mv_help_icon, .mv_r_close, .mv_r_btn").on("click",function(){app.isSocialVideoRoom&&$("#mutiVideoRule").toggle(),app.isSocialAudioRoom&&$("#mutiAudioRule").toggle()})},initMultiVideoAvatarTip=function(){$(".multi_social li").poshytip({showOn:"hover",className:"mv-info-tip",allowTipHover:!0,keepInViewport:!0,liveEvents:!0,alignTo:"target",alignY:"center",alignX:"right",offsetX:-4,content:function(){return 0!=$(this).find(".mv_info_wrap").length&&""},callback:function(e){0!=$(e).find(".mv_info_wrap").length?getSocialModeratorCardInfo($(e).attr("data-mid"),function(a){0==a.errno?($(e).poshytip("update",function(e){for(var a="",i=0;i<3;i++)e.rank[i]?a+='<li class="fl">                                    <div class="mv_contribute_wrap">                                        <img src="'+common.filterHttp(e.rank[i].headPic)+'"/>                                        <em class="mv_rank_icon_'+i+'"></em>                                    </div>                                    <P class="mv_rank_nickname">'+e.rank[i].nickname+"</P>                                </li>":a+='<li class="fl">                                    <div class="mv_contribute_wrap">                                        <span class="mv_card_wait_icon"></span>                                        <em class="mv_rank_icon_'+i+'"></em>                                    </div>                                    <P class="mv_rank_nickname">虚位以待</P>                                </li>';var t="";t=e.mInfo.isAttention?'<p class="mv_info_card_follow followed" data-mid="'+e.mInfo.mid+'">取消关注</p>':'<p class="mv_info_card_follow" data-mid="'+e.mInfo.mid+'">+ 关注</p>';var n=e.mInfo.mid===app.mid?'<p class="mv_info_card_title"></p>':`<p class="mv_info_card_title">本场贡献榜</p>\n                                <ul class="mv_contribute_rank clearfix">\n                                ${a}\n                                </ul>`;return'                        <div class="mt_content">                            <em class="arrow"></em>                            <div class="mt_top">                                <div class="avatar_wrap">                                    <img src="'+common.filterHttp(e.mInfo.headPic)+'"/>                                </div>                                <p class="nickname">'+e.mInfo.nickname+' <span class="level_icon m_level_icon_'+e.mInfo.mod_level+'"></span></p>                                <p class="id_num">ID：'+e.mInfo.mid+"</p>                            </div>                            "+n+"                            "+t+"                         </div>"}(a.data)),setTimeout(function(){initSocialMFollow()},0)):layer.alert(a.msg)}):$(e).hasClass("empty")&&$(e).poshytip("update","")}}),$(".multi_social li.empty").off().on("click",function(){$(this).hasClass("empty")&&$(".download_social").show()}),initAutoBounceGifts()},initSocialAppDownloadLayer=function(){$(".download_social .mask, .download_social .close").on("click",function(){$(this).closest(".download_social").hide()})},initSocialMFollow=function(){!function e(){0!=$(".mv_info_card_follow").length?($(".mv_info_card_follow").off().on("click",function(){var e=$(this),a=e.data("mid");setAttention(a,function(){e.text("已关注"),e.addClass("followed")},function(){e.text("+关注"),e.removeClass("followed")})}),$(".mv_info_card_follow.followed").hover(function(){$(this).html("取消关注")},function(){$(this).html("已关注")})):setTimeout(function(){e()},200)}()},showBindPhoneHint=function(){$("#bindLayer").hide(),$(".bind_phone_hint_wrap").removeClass("animated tada"),setTimeout(function(){$(".bind_phone_hint_wrap").addClass("animated tada").show()},100),0!=rStatus.bindPhoneTimeout&&clearTimeout(rStatus.bindPhoneTimeout),rStatus.bindPhoneTimeout=setBindPhoneTimeout(),$(".bind_phone_hint_wrap").off().hover(function(){clearTimeout(rStatus.bindPhoneTimeout)},function(){rStatus.bindPhoneTimeout=setBindPhoneTimeout()}),$(".bph_btn").off().on("click",function(){showBindOnChat()})},setBindPhoneTimeout=function(){return setTimeout(function(){$(".bind_phone_hint_wrap").hide()},5e3)},showBindOnChat=function(){$("#bindLayer").show(),$(".bind_phone_hint_wrap").hide();var e=document.getElementById("bindLayer").contentWindow.document.querySelector("body");e.style.cssText="background: #fff;overflow: hidden;",e.querySelector(".bind_wrap").className+=" chat"};function initAutoBounceGifts(){$(".multi_social li").not(".empty").off("click").on("click",function(){if(!$(this).hasClass("empty")&&0!=$(this).index()&&1!=$(this).index()&&2!=$(this).index()){$(".show_all_gifts i").hasClass("active")||toggleGiftsSelectBox();var e=$(this).index(),a=$(this).data("mid"),i=0==e?0:e-2;$(".gs_desc").text($(".gs_list li").eq(i).text()),$(".gs_desc").attr("data-mid",a),$(".gs_desc").attr("data-pos",i),updateSelectedGuestMid()}})}function syncVolume(e){audioPlayerObj.map(function(a,i){0!=i&&(a.volume=e)})}function getSocialModeratorCardInfo(e,a){$.ajax({url:"/roomV5/getSocialModeratorCardInfo",data:{mid:e,rid:app.rid},dataType:"JSON",type:"GET",success:function(e){e="string"==typeof e?JSON.parse(e):e,a(e)}})}function getTrueNickName(e){return e=e.replace(/[<>&"]/g,function(e){return{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"}[e]})}roomInit(),exports.initPlayer=initPlayer,exports.punishOrClear=function(e,a,i){if(1==i.type)$(".progressbar").remove();else{$(".video_area").append('<div id="svgContainer" class="chaofeng">                <div class="conver-bg">                    <div class="center-bg">                    </div>                </div>            </div>');var t=document.querySelector("#svgContainer");animItem=bodymovin.loadAnimation({wrapper:t,animType:"svg",loop:!1,autoplay:!0,path:"//static.guojiang.tv/pc/v3/img/room/svg/pkEraser/data.json"});setTimeout(function(){$(".chaofeng").remove()},5500);$(".progressbar").remove()}addPublicRoomMsg(i.msg,8)};var showFirstRechargeBox=function(){require.async("firstRecharge",function(e){e.showRechargeBox()})};exports.showFirstRechargeBox=showFirstRechargeBox,$(".slide-sc").on("click",function(){showFirstRechargeBox(),_czc.push(["_trackEvent","pc直播间","首充礼包按钮"])}),$(".video_area").on("click",".sc-btn",function(){_czc.push(["_trackEvent","pc直播间","首充礼包-立即体验按钮"]),history.pushState("","","?s=f"),scJudge=!0,console.log(scJudge);var e=app.isFirstRecharge;""==app.uid?ruser.showLoginPanel():1==e?require.async("payLayer",function(e){e.goPay({gapMoney:1,headlineText:"选择支付方式",hasCounter:!1,unitPrice:0,customContent:function(e){return""},clickCallback:function(e){"wx"==e?_czc.push(["_trackEvent","pc直播间","选择首充礼包-微信购买按钮"]):_czc.push(["_trackEvent","pc直播间","选择首充礼包-支付宝购买按钮"])},successCallback:function(e,a){"wx"==a?_czc.push(["_trackEvent","pc直播间","选择首充礼包-微信购买成功"]):_czc.push(["_trackEvent","pc直播间","选择首充礼包-支付宝购买成功"]),history.back(),$(".sc-posi").hide(),$(".slide-sc").parent().remove(),$(".entry-slide-con").find(".slide-point").remove(),$(".entry-slide-con").find(".slide-btn").remove(),activeIconPlayer(".entry-slide-con")}})}):(disapperTost(2500,"您已充值过或购买过该礼包"),$(".sc-posi").hide(),history.back())});var recom_page=0,recom_lock=!1;function initHotRecommend(){$(".click_load_more").on("click",function(){beginLoad()}),$(window).on("scroll",function(){beginLoad()})}function beginLoad(){var e=$(window).scrollTop(),a=$(window).height(),i=$(document).height(),t=i-e-a;if(recom_lock||i==a)return!1;t<100&&(recom_lock=!0,loadRecomPage(++recom_page))}function loadRecomPage(page){$.ajax({url:"/roomV5/getHotRecommend",data:{page:page},type:"post",dataType:"json",beforeSend:function(){$(".index_load_hint").show()},success:function(e){(recom_lock=!1,0==e.errno)?updateRecommed(e.data):100==e.errno&&($(".index_load_hint").hide(),$(".click_load_more p").text("已加载所有数据").parent(".click_load_more").off(),$(window).off("scroll"))},complete:function(data){var responseText=eval("("+data.responseText+")");0==responseText.errno&&$(".index_load_hint").hide()},error:function(e){recom_lock=!1,$(".index_load_hint").text("数据加载出错"+e).show()}})}function updateRecommed(e){for(var a=e.rooms,i="",t=0,n=a.length;t<n;t++){var o=a[t],s="";o.isPk&&(s='<span class="live_icon pk">PK进行中</span>'),i+='<li>                <a class="img_wrap" href="/'+o.mid+'" target="_blank">                    <img src="//static.guojiang.tv/pc/v3/img/common/avatar.png?v=f4dbc6ab91" data-original="'+common.filterHttp(o.headPic)+'" class="lazy">                    '+s+'                    <p class="rc_info">                        <span class="viewer"><i></i>'+o.onlineNum+'</span>                    </p>                    <div class="mask_wrap mask hide">                        <span class="start animated flipInY"></span>                    </div>                </a>                <a class="clearfix recommend_desc" href="/'+o.mid+'"  target="_blank">                    <img src="//static.guojiang.tv/pc/v3/img/common/avatar.png?v=f4dbc6ab91" data-original="'+common.filterHttp(o.headPic)+'" class="fl rec_avatar lazy">                    <div class="fl rec_desc">                        <span class="nickname ellipsis">'+o.nickname+'</span>                        <small class="intro ellipsis">'+o.announcement+"</small>                    </div>                </a>            </li>"}$(".recommend_wrap ul").append(i),$("img.lazy").show().lazyload()}function showGuardHome(){require.async("guardHome",function(e){e.showGuardHome(app.guardInfo,app.mInfo.m.head_pic_1)})}function goNewWelfareCountDown(e){$(".new_welfare_entry").timeCountDown({time:e,callback:function(){$(".new_welfare_entry, .newWelfare_hint").hide()}})}function changeAccount(e,a,i){i.coin&&(app.uInfo.coin=i.coin,$(".hu_coin_num").text(app.uInfo.coin))}function getNormalGifts(){$.ajax({url:"/roomV5/getNormalGifts",data:{mid:app.mid},dataType:"JSON",type:"GET",success:function(e){0==e.errno?(app.gifts=e.data.gifts,showGiftsList(e.data.gifts,app.isGuard,"normal")):-100==e.errno?ruser.showLoginPanel():(showGiftsList("",app.isGuard,"normal"),layer.alert(e.msg))}})}function getGuardGifts(e){$.ajax({url:"/roomV5/getGuardGifts",data:{uid:app.uid,mid:app.mid},dataType:"JSON",type:"GET",success:function(a){0==a.errno?(app.guardGifts=a.data.guardGifts,showGiftsList(a.data.guardGifts,a.data.isGuard,e)):-100==a.errno?ruser.showLoginPanel():showGiftsList("",app.isGuard,e)}})}function refreshBackpackGifts(){$(".gifts_type span[data-target='backpack']").hasClass("active")&&getBackpackGifts("backpack")}function getBackpackGifts(e){$.ajax({url:"/roomV5/getBackpackGifts",data:{uid:app.uid},dataType:"JSON",type:"GET",success:function(a){0==a.errno?(app.backpackGifts=a.data.list,showGiftsList(a.data.list,"",e)):-100==a.errno?(showGiftsList("",app.isGuard,e),ruser.showLoginPanel()):showGiftsList("",app.isGuard,e)},error:function(){showGiftsList("",app.isGuard,e)}})}function tipNewPkgGift(e){0==e&&($(".gifts_type > span").find("b").show(),refreshBackpackGifts())}function showGiftsList(e,a,i){for(var t="",n="",o="block"==$(".all_panel").css("display"),s=0;s<e.length;s++){var l="backpack"==i?e[s].pid:e[s].id,c=e[s]?e[s].imgPreview:"",r=e[s]?"":"space_img",p="",d=!a&&"guard"==i&&e[s]?'<span class="mask"><i></i></span>':"",m="fans"==i&&e[s]&&!e[s].canSendFanGift?'<span class="mask"><i></i></span>':"",f="fans"==i&&e[s]&&!e[s].canSendFanGift?"true":"false",u="backpack"==i?e[s].pkgItemsetId:"",_="backpack"==i?e[s].num:"";void 0!=e[s].pcCornerMark&&""!=e[s].pcCornerMark?_gu_continue_icon='<img class="gu_corner_icon" src="'+common.filterHttp(e[s].pcCornerMark)+'"/>':_gu_continue_icon="",0==s&&(p=!a&&"guard"==i&&e[s]?"":"backpack"==i?"":"active"),s<18&&(n+='<li  data-num= "'+_+'" data-type="'+e[s].type+'" data-bpid= "'+u+'"  data-index="'+s+'"  data-id="'+l+'" data-desc="'+f+'" class="'+r+" "+p+'">                                      '+_gu_continue_icon+'                                      <img src="'+common.filterHttp(c)+'"  class="gu_img"/>                                      '+d+m+"                                 </li>"),t+='<li  data-num= "'+_+'" data-type="'+e[s].type+'" data-bpid= "'+u+'" data-index="'+s+'"  data-id="'+l+'" data-desc="'+f+'" class="'+r+" "+p+'">                                      '+_gu_continue_icon+'                                      <img src="'+common.filterHttp(c)+'"  class="gu_img"/>                                      '+d+m+"                                 </li>"}if(0==e.length&&(n+='<li class="space_img"></li>',t+='<li class="space_img"></li>'),o){s=0==e.length?1:e.length;var g=52*Math.ceil(s/18)+27+5+10+"px";$(".all_panel").css({height:g})}$("#giftsSelected").html("").append(n),$("#giftsAll").html("").append(t),initGiftsSelect()}exports.initGuardList=initGuardList,exports.showGuardHome=showGuardHome,exports.changeAccount=changeAccount,exports.getNormalGifts=getNormalGifts,exports.getGuardGifts=getGuardGifts,exports.refreshBackpackGifts=refreshBackpackGifts,exports.getBackpackGifts=getBackpackGifts,exports.tipNewPkgGift=tipNewPkgGift;var chatNum=0,isScrollBottom=!0,clickToHideNewMessage=!1;function addPublicRoomMsg(e,a){var i=$("#chatArea"),t=a==ROOM_SEND_GIFT_MSG?"<span>送</span>":"<span>对</span>";if(chatNum=i.find("p").length,8==a)i.append("<p class='system_message change-color'>"+e+"</p>");else if(a==ROOM_TIP_MSG||a==ROOM_TIP_GIFT_MSG)showRoomHint(e);else if(a==ROOM_SEND_FLOWER_MSG){var n=getFullNickname(e.uid,e.nickname,e.type,e.level,e.medals,e.fromGuardType);i.append("<p class='hint'>"+n+"<span> 送了心</span></p>")}else if(a==ROOM_LEVEL_INCREASE_MSG){n=getFullNickname(e.uid,e.nickname,"",e.level,"",e.fromGuardType);i.append("<p class='hint'><span>恭喜 </span>"+n+"<span> 升到"+(e.level+1)+"级</span></p>")}else if(a==ROOM_TALK_MSG||a==ROOM_SEND_GIFT_MSG){var o=e.fromLevel,s=e.toLevel,l=(n=getFullNickname(e.fromUid,e.fromNickname,e.fromType,o,e.fromMedals,e.fromGuardType,e.fromFamilyMedal,e.ffm,e.ffl),getFullNickname(e.toUid,e.toNickname,e.toType,s,e.toMedals,e.toGuardType,e.toFamilyMedal,e.tfm,e.tfl)),c="";e.fromType==ROOM_OFFICIAL||e.fromType==ROOM_OFFICIAL_ADMIN?c+="orange":e.fromIsGuard?c+=" guard_color":"box"==e.msgType&&(c+=" redpacket_msg");var r,p="";app.isSocialRoom&&(a==ROOM_SEND_GIFT_MSG&&(t="<span>送给</span>"),p=0==e.pos?"主持人":e.pos+"号嘉宾"),r=a==ROOM_SEND_GIFT_MSG?'<p class="c_gift_wrap">'+n+t+"<span>"+p+"</span><span>"+e.num+"个"+e.pname+'</span><img class="c_gift" src="'+common.filterHttp(e.giftPic)+'" />                            </p>':'<p class="'+c+'">'+n+(0==e.toUid?"":" "+t+" "+l)+"<span>说："+e.msg+"</span>                            </p>",i.append(r),e.fromUid==app.uid&&switchToChat()}else if("ATTACK_BOSS_MSG"==a)if("object"==typeof e){n=getFullNickname(e.uid,e.nickname,e.type,e.level,e.medals,e.guardType,e.familyMedal,e.mfm,e.mfl);e.price==unitPrice[2]||e.isLastAttack?i.append("<p class='big-price'>"+n+"<span> "+e.webPayload+"</span></p>"):i.append("<p class='hint'>"+n+"<span> "+e.webPayload+"</span></p>")}else showRoomHint(e);else{if(-1!=e.uid&&!e.lowkeyEnter){n=getFullNickname(e.uid,e.nickname,e.type,e.level,e.medals,e.guardType,e.familyMedal,e.mfm,e.mfl);i.append("<p class='hint'><span>欢迎</span> "+n+"<span> 进入直播间</span></p>")}e.fromUid==app.uid&&switchToChat()}chatNum>200&&i.find("p").eq(0).remove(),clickToHideNewMessage=!1,e.fromUid==app.uid?(config.chatAreaSlimscroll.slimScroll({scrollTo:"99999px"}),isScrollBottom=!0,hideNewMessageHint()):isScrollBottom?config.chatAreaSlimscroll.slimScroll({scrollTo:"99999px"}):showNewMessageHint()}exports.addPublicRoomMsg=addPublicRoomMsg;var scrollStartPos=0;function hideNewMessageHint(){isScrollBottom=!0,$(".more_message_wrap").hasClass("show")&&$(".more_message_wrap").animate({bottom:"-36px"},200,function(){$(this).hide(),$(this).removeClass("show")})}function showNewMessageHint(){$(".more_message_wrap").show(function(){$(this).css("bottom","26px").addClass("show")})}function bindChatAreaEvent(){$(".more_message_wrap").off().on("click",function(){isScrollBottom=!0,clickToHideNewMessage=!0,$(this).css("bottom","-36px"),$(this).hide(300).removeClass("show"),config.chatAreaSlimscroll.slimScroll({scrollTo:"99999px"})})}function getFullNickname(e,a,i,t,n,o,s,l,c){var r="",p="",d="",m="",f="",u="",_="",g="",h="",v="";if(r='<span class="level_icon u_level_icon_'+t+'"></span>',s&&""!=s&&(h='<img src="//static.kuaishouvideo.com/pc/medals/'+s+'" class="family_icon"/>'),l&&""!=l&&(v='<span class="chat-area-tooltip fans_medal_icon fans_level_icon_'+c+'">'+l+'                                <span class="hover-panel">                                    <span>粉丝徽章</span>                                    <a href="http://m.kuaishouvideo.com/dist/fans/rule.html" target="_blank">查看详细</a>                                </span>                            </span>'),i==ROOM_OWN_USER||i==ROOM_MODERATOR_USER?(p='<span class="moderator_icon" title="主播认证"></span>',r='<span class="level_icon u_level_icon_'+t+'"></span>'):i!=ROOM_ADMIN_USER||app.isSocialRoom?i==ROOM_OFFICIAL?m='<span class="official_icon" title="官方认证"></span>':i==ROOM_OFFICIAL_ADMIN&&(m='<span class="official_icon" title="官方认证"></span>',app.isSocialRoom||(d='<span class="admin_icon" title="管理员"></span>')):d='<span class="admin_icon" title="管理员"></span>',n&&0!==n.length)for(var w=0;w<n.length;w++)_+='<span class="medal_icon medal_icon_'+n[w]+'" title="活动勋章"></span>';for(var y=0;y<config.activityBadge.length;y++)config.activityBadge[y]==e&&(f='<span class="activity_icon" title="活动大使"></span>');for(var $=0;$<config.superAdminBadge.length;$++)config.superAdminBadge[$]==e&&(u='<span class="admin_super_icon" title="平台巡管"></span>');if(null==o||app.isSocialRoom||(g='<span class="guard_medal_icon guard_medal_icon_'+o+'" title="'+["白羊座","金牛座","双子座","巨蟹座","狮子座","处女座","天枰座","天蝎座","射手座","摩羯座","水瓶座","双鱼座"][o]+'守护勋章"></span>'),a)var k=getTrueNickName(a);return m+d+p+f+u+_+g+r+h+v+'<span class="nickname rname" data-uid="'+e+'" >'+k+"</span>"}function switchToChat(){var e=$(".r_chat_controller li");0!==$(".r_chat_controller li.active").index()&&(e.removeClass("active"),e.eq(0).addClass("active"),$(".r_chat_wrap").show().siblings(".r_admin_wrap").hide())}function switchToAdmin(){var e=$(".r_chat_controller li");e.removeClass("active"),e.eq(1).addClass("active"),$(".r_chat_wrap").hide().siblings(".r_admin_wrap").show(),initAdminScrollBar(),initAdminList()}function initAdminList(){$.ajax({url:"/roomV5/getAdminList",data:{mid:app.mid,rid:app.rid},type:"GET",dataType:"JSON",beforeSend:function(){$("#rAdmin").html('<img src="//static.guojiang.tv/pc/v3/img/common/loading.gif" style="width:15px;margin:35px auto 42px;display:block;"/>')},success:function(e){var a=e.data.adminList,i=a.length,t="";if(i>0)for(var n=0;n<i;n++)t+='<p class="clearfix">                                <span class="admin_icon fl" title="管理员"></span>                                <span class="fl rname" data-uid="'+a[n].uid+'">'+a[n].nickname+'</span>                                <span class="level_icon u_level_icon_'+a[n].level+' fr"></span>                            </p>';else t+='<p style="text-align:center;">暂时还没有管理员哦~</p>';$("#rAdmin").html(t)}})}function updateAdminList(e){$("#rAdmin").find('p .rname[data-uid="'+e+'"]').closest("p").remove()}function sendMsg(){if(""!=app.uid){var e=$("#msgTextarea"),a=$.trim(e.val());if(a.length>50)addPublicRoomMsg("每次发送文本不能超过50个字符",ROOM_TIP_MSG);else{e.val("");var i={msg:a,toUid:config.chatToUid,private:!1};message.sendData("sendMsg",i),0!=config.chatToUid&&switchChatToAll()}}else ruser.showLoginPanel()}function switchChatToAll(){config.chatToUid=0,$(".r_chat_close").hide(),$("#msgTextarea").val("").gjPlaceHolder({fontSize:"13px",placeHolderColor:"#999999",top:3,left:5,inputTextColor:"#333",content:"发言免费领礼物啦~",relParent:$(".rc_input_wrap")})}function sendFlower(){message.sendFlower("sendFlower",{})}config.chatAreaSlimscroll.on("slimscroll",function(e,a){e.preventDefault(),"bottom"==a?(isScrollBottom=!0,hideNewMessageHint()):"top"==a?isScrollBottom=0==scrollStartPos||!!clickToHideNewMessage:scrollStartPos>a&&(isScrollBottom=!1),"top"==a&&"bottom"==a||(scrollStartPos=a)});var moving_flower_num=0,room_chat_hint;function updateFlowerNum(){$(".mInfo_love_num").text(parseInt($(".mInfo_love_num").text())+1),moving_flower_num++}function fMove(e){var a,i=30*Math.random()+15,t=.005*Math.random()+.01,n=Math.random()+1.7,o=17,s=0==parseInt(2*Math.random()),l=function(){o+=n,a=s?i*Math.sin(t*o)+20:-i*Math.sin(t*o)+20;var c=(400-o)/400;$(e).css({left:a,bottom:o,opacity:c}),o<=400?window.requestAnimationFrame(l):(window.cancelAnimationFrame(l),$(e).fadeOut(function(){$(this).remove(),moving_flower_num--}))};window.requestAnimationFrame(l)}function showRoomHint(e){$(".r_hint_wrap").attr("title",e).show().find(".r_hint_font").html(e),clearTimeout(room_chat_hint),room_chat_hint=setTimeout(function(){$(".r_hint_wrap").fadeOut()},5e3)}function fillFace(e){for(var a=config.faces.length-1;a>=0;a--)e=e.replace(new RegExp("\\"+config.faces[a].data,"g"),'<img src="'+common.filterHttp(config.faces[a].img)+'" width=24 height=24`>');return e}function showRecommendPlaying(){$(".va_rest").show(),$.ajax({url:"/roomV5/getPlaying",type:"POST",dataType:"JSON",success:function(e){if(0==e.errno){if(0==e.data.length);else{$(".va_rest p.title").show();for(var a="",i=0;i<e.data.length;i++)a+='<li class=" animated fadeIn '+(i==e.data.length-1?"last":"")+'" >                                        <a class="img_wrap" href="/'+e.data[i].mid+'"  target="_blank">                                            <img src="//static.guojiang.tv/pc/v3/img/common/avatar.png" data-original="'+common.filterHttp(e.data[i].logo)+'" class="lazy">                                            <span class="live_icon">直播</span>                                            <p class="clearfix rc_info">                                                <span class="fl time">'+e.data[i].nickname+'</span>                                                <span class="fr viewer"><i></i>'+e.data[i].onlineNum+'</span>                                                                   </p>                                            <div class="mask_wrap mask hide">                                                <span class="start animated flipInY"></span>                                            </div>                                        </a>                                    </li>'}$(".va_rest ul").html(a),$("img.lazy").show().lazyload()}else layer.alert(e.msg,{icon:2})}})}function hideRecommendPlaying(){$(".va_rest").hide()}function showAvatarInfo(e,a){a.poshytip("show"),$.ajax({url:"/roomV5/getUserInfo/uid/"+e+"/rid/"+app.rid,type:"get",dataType:"JSON",success:function(e){if(0==e.errno){var i=e.data.uInfo,t=i.type,n='<li onclick="room.ban('+i.id+", "+i.level+", "+app.uType+",$(this),"+app.banTime+')">禁言'+app.banTime+"小时</li>",o='<li onclick="room.unban('+i.id+',$(this))">取消禁言</li>',s=i.isBan?o:n,l='<li onclick="room.ti_room('+i.id+","+i.level+", "+app.uType+", "+i.guardTimetype+')">踢出房间</li>',c=i.nickname.replace(new RegExp(/\s/gm),"");l=app.uType!=ROOM_OWN_USER&&app.uType!=ROOM_MODERATOR_USER&&app.uType!=ROOM_OFFICIAL_ADMIN&&app.uType!=ROOM_OFFICIAL||t==ROOM_MODERATOR_USER&&t==ROOM_OWN_USER&&t==ROOM_OFFICIAL_ADMIN&&t==ROOM_OFFICIAL?"":l;var r,p=getTrueNickName(c),d=""==i.signature?"":'<p class="mt_bottom mt_bottom_chat">简介：'+i.signature+"</p>",m="<span onclick=room.talk_to_ta("+i.id+',"'+p+'")>对ta说</span>',f='<span onclick="room.set_admin('+i.id+',$(this))">设为管理</span>',u='<span onclick="room.set_admin('+i.id+',$(this))">取消管理</span>',_='<div class="o_more_wrap">                                            <em class="more fl" onclick="room.showAvatarTipMoreFuns()"></em>                                            <ul class="o_more hide">                                                '+s+l+"                                            </ul>                                        </div>";switch(!0){case app.uType==ROOM_COMMON_USER:r=m;break;case app.uType==ROOM_OWN_USER||app.uType==ROOM_MODERATOR_USER:var g=t==ROOM_ADMIN_USER||t==ROOM_OFFICIAL_ADMIN?u:f;g=t==ROOM_OFFICIAL_ADMIN||t==ROOM_OFFICIAL?"":g,_=t==ROOM_OFFICIAL_ADMIN||t==ROOM_OFFICIAL?"":_,r=app.isSocialRoom?m+_:m+g+_;break;case app.uType==ROOM_ADMIN_USER:r=m+(_=t==ROOM_ADMIN_USER||t==ROOM_MODERATOR_USER||t==ROOM_OWN_USER||t==ROOM_OFFICIAL_ADMIN||t==ROOM_OFFICIAL?"":_);break;case app.uType==ROOM_OFFICIAL||app.uType==ROOM_OFFICIAL_ADMIN:r=m+(_=t==ROOM_MODERATOR_USER||t==ROOM_OWN_USER?"":_)}r=app.uid==i.id?"这是你自己":r;var h="";t==ROOM_ADMIN_USER&&(h='<span class="admin_icon" title="管理员"></span>');var v="";if(i.medal)for(var w=0;w<i.medal.length;w++)v+='<span class="medal_icon medal_icon_'+i.medal[w]+'" title="活动勋章"></span>';var y="";if(i.guardMedals)for(w=0;w<i.guardMedals.length;w++)-1!=i.guardMedals[w].status&&(y+='<span class="guard_medal_icon guard_medal_icon_'+i.guardMedals[w].type+'" title="守护图标"></span>');var $="";i.userPutOnMedal&&($='<span class="fans_medal_icon fans_level_icon_'+i.userPutOnMedal.level+'" title="粉丝徽章">'+i.userPutOnMedal.medal+"</span>");var k="";t!=ROOM_MODERATOR_USER&&t!=ROOM_OWN_USER||(k='<p class="upgrade">还差'+app.mInfo.m.mod_next_level_need_more+'克拉升级</p>                            <div class="process_bg">                                <p class="process_bar" style="width:'+app.mInfo.m.mod_level/41*258+'px"></p>                            </div>');var b=null!==i.isVip&&0!=i.isVip?'<span class="icon_V"></span>':"",O=(p=getTrueNickName(i.nickname),'                        <div class="mt_content" data-uid="'+i.id+'">                            <em class="arrow"></em>                            <div class="mt_top">                                <div class="avatar_wrap">                                    <img src="'+common.filterHttp(i.head_pic_1)+'"/>'+b+'                                </div>                                <p class="nickname">'+p+" "+h+v+y+'<span class="level_icon u_level_icon_'+i.level+'"></span>'+$+'</p>                                <p class="id_num">'+config.siteKeyWords+"ID："+i.fuid+"</p>                                "+k+"                            </div>                            "+d+'                            <div class="operator_area">'+r+"</div>                         </div>");a.poshytip("update",O)}else{if(-100==e.errno)return void ruser.showLoginPanel();a.poshytip("update","获取用户信息失败")}}})}function refreshCoin(e,a,i){e==app.uid&&(app.uInfo.coin=a,$(".coin_remain span, .pp_val span").text(a),app.mInfo.m.mod_next_level_need_more-=i,initModeratorAvatarTip(),$(".hu_coin_num").text(a))}function showLight(e){for(var a=parseInt(e.cost)/100,i=!1,t=app.setGift.length,n=0;n<t;n++)0!=app.setGift[n].targetPid&&e.num==app.setGift[n].num&&(i=!0);if(i)fillFlight(e,8,4e3),0==$(".activity_posi_icon").length&&$(".fl_info_later").append('<div class="activity_posi_icon"></div>');else switch($(".activity_posi_icon").remove(),!0){case a<1:211==e.pid?fillFlight(e,1,5e3):fillFlight(e,1,4e3);break;case a>=1&&a<3:fillFlight(e,2,4e3);break;case a>=3&&a<6.6:fillFlight(e,3,4e3);break;case a>=6.6&&a<18.8:fillFlight(e,4,5e3);break;case a>=18.8&&a<52:fillFlight(e,5,6e3);break;case a>=52&&a<131.4:fillFlight(e,6,7e3);break;case a>=131.4:fillFlight(e,7,7e3)}$(".flw_group_wrap").css("z-index",1)}exports.refreshCoin=refreshCoin;var flQueue=[];function fillFlight(e,a,i){var t=e.fromUid,n=parseInt(e.cost/100),o=e.ptype,s=$('.flw_wrap[data-gUid="'+t+'"][data-pid="'+e.pid+'"]').eq(-1);if(0!=s.length&&n<1&&s.data("pnum")<10&&3!=o){var l=parseInt(s.attr("data-totalnum")),c=l+parseInt(e.num);s.attr("data-totalnum",c);var r=s.attr("data-timeindex");window.clearTimeout(r);var p=setTimeout(function(){!function e(){var a=parseInt(s.find(".fl_gift_num i").text()),t=s.attr("data-totalnum");a<t?setTimeout(function(){e()},i):s.fadeOut(function(){s.remove(),resetFlwZindex()})}()},i);s.attr("data-timeindex",p),flCountDown(s,c,l,i)}else{var d=$('.flw_wrap[data-gUid="'+t+'"][data-pid="'+e.pid+'"][data-pnum="'+e.num+'"]').eq(-1),m=$(".flow_light_temp").clone().removeClass("flow_light_temp");if(m.find(".fl_bg").attr("src","//static.guojiang.tv/pc/v3/img/room/flow_light/"+a+".png"),m.find(".fl_name").text(e.fromNickname),m.find(".fl_gift_img").attr("src",e.giftPic).attr("data-pid",e.pid),m.find(".fl_gift_num i").text(e.num),m.find(".gift_name").text(e.pname),m.find(".from_avatar").attr("src",e.fromHeadPic),a>3&&m.find(".fl_flicker_pre").addClass("fl_flicker_"+a),0!=d.length&&n>=1||0!=d.length&&3==o){m.find(".fl_num_wrap").removeClass("fl_num_click");var f=d.find(".fl_group_num").data("group"),u=f?f+1:2;m.find(".fl_group_num").attr("data-group",u);var _=parseInt(u/100),g=parseInt(u/10)%10,h=u%10;_>0&&m.find(".hundreds_digit").addClass("fl_g_"+_),(_>0&&0==g||g>0)&&m.find(".tens_digit").addClass("fl_g_"+g),m.find(".units_digit").addClass("fl_g_"+h)}var v=$('<div class="flw_wrap clearfix" data-gUid="'+t+'" data-pid="'+e.pid+'" data-pnum="'+e.num+'">'+m.html()+"</div>");n<1&&(v.find(".fl_gift_num i").text(1),flCountDown(v,e.num,1,i)),a>3?showFlicker(v):v.find(".fl_info_later").show();var w=setTimeout(function(){v.fadeOut(function(){v.remove(),resetFlwZindex()})},i);v.attr("data-timeindex",w).attr("data-totalnum",e.num),v.appendTo(".flw_flow")}}function resetFlwZindex(){0==$(".flw_flow").children().length&&$(".flw_group_wrap").css("z-index",-1)}function flCountDown(e,a,i,t){var n=i;!function t(){var o=parseInt(e.find(".fl_gift_num i").text());o<i?setTimeout(t,100):function(){var i=setInterval(function(){n<a?(n++,e.find(".fl_gift_num").html("<i>"+n+"</i>")):clearInterval(i)},300)}()}()}function showFlicker(e){e.find(".fl_flicker_pre").delay(200).show().animate({left:"155px"},500,"linear",function(){var a=$(this);e.find(".fl_info_later").show(),a.hide();var i=e.find(".fl_num_bottom_wrap").width(),t=i<135?"345":i<155?"365":"400";e.find(".fl_flicker_later").show().animate({left:t+"px"},200,"linear",function(){$(this).fadeOut()})})}function showSpecialEffects(e){var a={197:{name:"toutiao",fadetime:6e3},732:{name:"firecracker",fadetime:7500}};void 0!=a[e.pid]&&checkSwfQueue(src="//static.guojiang.tv/pc/v3/img/room/gif/"+a[e.pid].name+".gif",a[e.pid].fadetime,"gif"),211==e.pid&&""!=e.iosEffect&&checkSwfQueue("",7e3,"hybirddabaojian"),229==e.pid&&checkSwfQueue("",12500,"hybirdgrow"),void 0!=e.pcAnimationJsonUrl&&checkSwfQueue(e.pcAnimationJsonUrl,e.pcAnimationDuration,"svg")}function checkSwfQueue(e,a,i,t,n){var o;e=common.filterHttp(e),$(".special_effect_wrap").hasClass("showing")?o=setTimeout(function(){checkSwfQueue(e,a,i,t)},500):("function"==typeof n&&n(),"swf"==i?createSwfObj(e,a,t):"svg"==i?creatSvgObj(e,a,t):"gif"==i?creatGifObj(e,a):"hybirddabaojian"==i?createDabaojianHybirdObj(a):"hybirdgrow"==i?createGrowHybirdObj(a):creatHybirdObj(e,a),clearTimeout(o))}function createSwfObj(e,a,i){swfobject.embedSWF(e,"seSwfObj","1150","600","9.0.115",null,null,{wmode:"transparent",allowFullScreen:"true"},null,null),$(".swf_wrap").fadeIn().parent(".special_effect_wrap").addClass("showing"),$("#seSwfObj").addClass(i),setTimeout(function(){$(".swf_wrap").fadeOut().parent(".special_effect_wrap").removeClass("showing")},a)}function creatSvgObj(e,a,i){$("#seSvgObj").html("").fadeIn().parent(".special_effect_wrap").addClass("showing");var t=document.getElementById("seSvgObj");bodymovin.loadAnimation({wrapper:t,animType:"svg",loop:!1,autoplay:!0,path:e});$("#seSvgObj").addClass(i),setTimeout(function(){$("#seSvgObj").fadeOut().parent(".special_effect_wrap").removeClass("showing")},a)}function creatHybirdObj(e,a){swfobject.embedSWF("//static.guojiang.tv/src/pc/img/room/flash/new/boat_b.swf","bSwfB","1150","600","9.0.115",null,null,{wmode:"transparent",allowFullScreen:"true"},null,null),$("#bSvg").html("");var i=document.getElementById("bSvg");bodymovin.loadAnimation({wrapper:i,animType:"svg",loop:!0,autoplay:!0,path:e});$(".boat_wrap").fadeIn().parent(".special_effect_wrap").addClass("showing"),setTimeout(function(){$(".boat_wrap").fadeOut().parent(".special_effect_wrap").removeClass("showing")},a)}function createDabaojianHybirdObj(e){$("#seSvgObj").html("").fadeIn().parent(".special_effect_wrap").addClass("showing");var a=document.getElementById("seSvgObj");bodymovin.loadAnimation({wrapper:a,animType:"svg",loop:!1,autoplay:!0,path:"//static.guojiang.tv/pc/v3/img/room/svg/dabaojian3/data.json"});setTimeout(function(){$("#seSvgObj").fadeOut().parent(".special_effect_wrap").removeClass("showing"),$(".se_gif").remove()},e)}function createGrowHybirdObj(e){$("#seSvgObj").html("").fadeIn().parent(".special_effect_wrap").addClass("showing");var a=document.getElementById("seSvgObj");bodymovin.loadAnimation({wrapper:a,animType:"svg",loop:!1,autoplay:!0,path:"//static.guojiang.tv/pc/v3/img/room/svg/grow/data.json"});setTimeout(function(){swfobject.embedSWF("//static.guojiang.tv/src/pc/img/room/flash/new/grow/leaves.swf","seSwfObj","1150","600","9.0.115",null,null,{wmode:"transparent",allowFullScreen:"true"},null,null),$(".swf_wrap").fadeIn().parent(".special_effect_wrap").addClass("showing"),$("#seSwfObj").addClass("leaves_swf")},5583);setTimeout(function(){swfobject.embedSWF("//static.guojiang.tv/src/pc/img/room/flash/new/grow/snow.swf","seSwfObj","1150","600","9.0.115",null,null,{wmode:"transparent",allowFullScreen:"true"},null,null)},9e3),setTimeout(function(){$(".swf_wrap").fadeOut(),$("#seSvgObj").fadeOut().parent(".special_effect_wrap").removeClass("showing"),$(".se_gif").remove()},e)}function creatGifObj(e,a){var i=new Image,t=$("#seSvgObj");t.html(""),i.src=e+"?v="+(new Date).getTime(),i.setAttribute("class","gif-img"),t.fadeIn().append(i).parent(".special_effect_wrap").addClass("showing"),i.onload=function(){setTimeout(function(){t.fadeOut().parent(".special_effect_wrap").removeClass("showing"),t.html("")},a)}}function closePlayer(){fplayer&&fplayer.destroy&&fplayer.destroy(),vplayer&&vplayer.destroy&&vplayer.destroy(),fplayer=null,vplayer=null}function showModeratorIncreaseAnimation(e,a,i){var t='<div class="increase_wrap">                        <span class="light rotate"></span>                        <span class="fire fireBoom"></span>                        <span class="huojian"></span>                        <span class="increase_level increase_level_'+a+'"></span>                        <div class="font bounceIn animated">                            <p class="increase_title"></p>                            <p class="increase_nickname"></p>                            <p class="increase_level_num"></p>                        </div>                    </div>';$("body").append(t);var n=$(".increase_wrap");n.animate({"margin-top":"-296px"},800,"swing",function(){typeWriting("恭喜主播",$(".increase_title"),function(){typeWriting(e,$(".increase_nickname"),function(){typeWriting("荣登"+i+"啦!",$(".increase_level_num"),function(){setTimeout(function(){n.animate({"margin-top":"-1500px"},850,"swing",function(){n.remove()})},2e3)})})})})}function typeWriting(e,a,i){if(""!=e)var t=e.split(""),n=0,o=t.length,s=setInterval(function(){n>=o&&(clearInterval(s),s=null,void 0!=i&&i()),a.append(t[n]),n++},100)}exports.closePlayer=closePlayer,exports.onChatMsg=function(e,a,i){if(-100!=e){if(108==e)return showBindPhoneHint(),void($(".broadcastCard-container-wrap")&&$(".broadcastCard-container-wrap").html(""));i.headPic,i.fromLevel,i.fromNickname,i.fromType,i.fromUid;if(0==e){i.msg=fillFace(i.msg),addPublicRoomMsg(i,ROOM_TALK_MSG);var t="#ffffff";switch(!0){case i.fromLevel>=0&&i.fromLevel<=8:t="#ffffff";break;case i.fromLevel>=9&&i.fromLevel<=18:t="#66ccff";break;case i.fromLevel>=19:t="#ff6868"}app.isPlaying&&(isVideoRoom()?barrageObj.push({text:i.msg,color:t}):swfobject.getObjectById(config.player.flashId)&&swfobject.getObjectById(config.player.flashId).loadMsgBarrage(i.msg,t))}else addPublicRoomMsg(a,ROOM_TIP_MSG)}else ruser.showLoginPanel()};var mountUserArr=[],loginAniArr=[],_gift_strike_jump_time;function showLoginEffect(e){e.mountId?showMountAni(e.uid,e):showLoginLight(e.nickname,e.level,e.guardTimeType,e.mountAction,e.mountName)}function showMountAni(e,a){var i=mountUserArr[e],t=(new Date).getTime();i?t-i>5e3&&showMountAndUpdateArr(e,t,a):showMountAndUpdateArr(e,t,a)}function showMountAndUpdateArr(e,a,i){createSvgAnimation(i.pcAnimationJsonUrl,i.pcAnimationDuration,$("#mountEffect")),showLoginLight(i.nickname,i.level,i.guardTimeType,i.mountAction,i.mountName),mountUserArr[e]=a}function createSvgAnimation(e,a,i){i.html("").fadeIn();bodymovin.loadAnimation({wrapper:i[0],animType:"svg",loop:!1,autoplay:!0,path:common.filterHttp(e)});setTimeout(function(){i.fadeOut(function(){i.html(""),goNextLoginEffect()})},a)}function showLoginLight(e,a,i,t,n){var o=void 0===t?"":t,s=void 0===n?"":n,l=getTrueNickName(e);if(void 0==i||void 0!==n||app.isSocialRoom){if(void 0===n){var c;r='<div class="le_content clearfix '+(c=""==(c=a>=17?"le_level le_level_height":a>=10?"le_level":"")?" hide":c)+'">                            <span class="le_flow_light hide"></span>                            <span class="le_nickname">'+l+'</span>                            <span class="level_icon u_level_icon_'+a+'"></span>                            <span>来了！</span>                        </div>'}else if(void 0!==n)r='<div class="le_content clearfix le_level mount">                            <span class="le_flow_light hide"></span>                            <span class="le_nickname">'+l+'</span>                            <span class="level_icon u_level_icon_'+a+'"></span>                            <span>'+o+"</span>                            <span>"+s+"</span>                            <span>来了！</span>                        </div>"}else var r='<div class="le_content clearfix">                            <span class="le_flow_light hide"></span>                            <span class="le_icon '+(0==i?"month":"")+'"></span>                            <span class="le_guard_prefix">爱的守护神</span>                            <span class="le_nickname">'+l+'</span>                            <span class="level_icon u_level_icon_'+a+'"></span>                            <span>来了！</span>                        </div>';$(".login_effect").html(r),setTimeout(function(){$(".le_content").animate({left:"0"},400,function(){var e=$(this);$(".le_flow_light").fadeIn(function(){var a=$(this);a.animate({left:"195px",opacity:.5},500,function(){a.hide(),setTimeout(function(){e.remove(),void 0===n&&goNextLoginEffect()},1500)})})})},500)}function goNextLoginEffect(){loginAniArr.splice(0,1),0!=loginAniArr.length&&showLoginEffect(loginAniArr[0])}function updateViewer(e,a){if("c"==app.viewerModel){var i=$(".mInfo_viewer_num"),t=parseInt(i.text());e?t++:t--,i.text(t)}else $(".mInfo_viewer_num").text(a)}function goGiftBonus(e,a,i,t){$.each(e.bonus_times,function(e,a){parseInt(a),showGiftBonusEffect(a)}),refreshCoin(a,i,t)}function showGiftBonusEffect(e){var a='<div class="gift_strike_effect">                        <span class="gse_bg"></span>                        <div class="gse_img">                            <span>X'+e+"</span>                        </div>                      </div>";startQueue(".gift_strike_effect",function(){$(".gift_strike_effect_wrap").html("").append(a),setTimeout(function(){$(".gift_strike_effect").fadeOut(function(){$(this).remove()})},3e3)})}function startQueue(e,a){0!=$(e).length?setTimeout(function(){startQueue(e,a)},200):a()}function showGiftStrikeJump(e){var a='<img src="//static.guojiang.tv/pc/v3/img/room/giftStrike/'+e+'.gif">';$(".gift_strike_jump").html(a),clearTimeout(_gift_strike_jump_time),_gift_strike_jump_time=setTimeout(function(){$(".gift_strike_jump").html("")},4e3)}function initModeratorAudio(e){let a=1==e.modSex?"#43bdf0":"#fa4fe5",i=getAudioAvatarWidth()/2;audioPlayerObj[e.position]=new audioPlayer({url:`http://hdl.wsdemo.zego.im/livestream/zegotest-2854705954-${e.streamId}.flv`,mountId:`mamCanvas${e.position}`,r:i,colors:[a]}),audioPlayerObj[e.position].volume=audioPlayerObj[0].volume}function closeSocialRoom(){app.isPlaying=!1,showRecommendPlaying(),closePlayer(),$(".va_controller, .va_flower_wrap, .cannot_auto_play").hide(),$(".multi_social").hide(),$(".multi_social li").html("")}function openSocialRoom(e){setTimeout(()=>{app.isPlaying=!0,hideRecommendPlaying(),initPlayer(),$(".va_controller").show(),$(".va_flower_wrap").show(),1==e?$("#multiVideoMask").show():$("#multiAudioMask").show()},5e3)}function addModeratorToMultiVideo(e){var a="";a=e.userHeadPic&&""!=e.userHeadPic?'<img src="'+e.userHeadPic+'" alt="" class="mv_u_avatar">':'<img src="" alt="" class="mv_u_avatar hide">';var i='<div class="mv_info_wrap">                        <span class="mv_people_index">                            <i class="mvpi_before"></i>                            <i class="mvpi_after"></i>                            <span class="mv_p_index_text">'+e.position+'</span>                        </span>                        <span class="mv_ban hide"></span>                        <div class="mv_minfo">                            <p class="mv_nickname">'+e.nickname+'</p>                            <span class="mv_coin">                                <i class="mv_coin_icon"></i>                                <span>'+e.earnCoin+"</span>                            </span>                            "+a+'                        </div>                    </div>                    <em class="mv_game_result_icon mv_game_result_icon_1 hide animated zoomIn"></em>                    <em class="mv_game_result_icon mv_game_result_icon_0 hide animated zoomIn"></em>';if(2==e.socialType){var t=$("#mamCanvas1").width();i=`<div class="mv_info_wrap">\n                        <div class="mam_avatar_wrap">\n                            <canvas class="mam_avatar_brave" id="mamCanvas${e.position}" width="${t}" height="${t}"></canvas>\n                            <span class="mv_people_index">\n                                <i class="mvpi_before"></i>\n                                <i class="mvpi_after"></i>\n                                <span class="mv_p_index_text">${e.position}</span>\n                            \n                            </span>\n                            <img src="${e.modHeadPic}" alt="avatar">\n                            <span class="mv_ban hide"></span>\n                        </div>\n                        <p class="mam_nickname">${e.nickname}</p>\n                        <p class="mv_coin">\n                            <i class="mv_coin_icon"></i>\n                            <span>${e.earnCoin}</span>\n                        </p>\n                    </div>\n                    \x3c!--胜利--\x3e\n                    <em class="mv_game_result_icon mv_game_result_icon_1 hide animated zoomIn"></em>\n                    \x3c!--失败--\x3e\n                    <em class="mv_game_result_icon mv_game_result_icon_0 hide animated zoomIn"></em>`}setTimeout(function(){$(".multi_social li.li_"+(parseInt(e.position)+3)).html(i).attr("data-mid",e.mid).removeClass("empty"),updateSelectedGuestMid(e.position,e.mid),initAutoBounceGifts()},5e3)}function removeModeratorFromMultiVideo(e){if(2==e.socialType&&audioPlayerObj[e.position]&&audioPlayerObj[e.position].destroy(),$(".multi_social li.li_"+(parseInt(e.position)+3)).html("").addClass("empty"),updateSelectedGuestMid(e.position,""),app.isSocialAudioRoom){var a=getAudioAvatarWidth(),i=`<div class="mam_pos" style="width:${a}px;height:${a}px;line-height:${a}px;">${e.position}</div>\n                <p class="mam_pos_desc">我要连线</p>`;$(".multi_social li.li_"+(parseInt(e.position)+3)).html(i)}}function updateSelectedGuestMid(e,a){$(".gs_list li").eq(parseInt(e)).attr("data-mid",a);var i=$(".gs_desc").attr("data-pos");$(".gs_desc").attr("data-mid",$(".gs_list li").eq(i).attr("data-mid"))}function initAudioNumBg(){let e=getAudioAvatarWidth();$(".mam_pos").css({width:e+"px",height:e+"px","line-height":e+"px"})}function getAudioAvatarWidth(){return.62*$(".multi_audio_mask li").width()}function initNewHotRankInfo(e){var a=$(".hotList_icon");a.hasClass("active")&&(a.removeClass("active"),$(".timeZoneHotList_wrap").hide()),$(".timeZoneHotList_btn").off().on("click",function(a){a.stopPropagation(),a.preventDefault(),require.async("newHotRank",function(a){a.insertNewHotRank(e)})})}function has_flash(){if(!!window.ActiveXObject||"ActiveXObject"in window)try{return!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){}else try{return!!navigator.plugins["Shockwave Flash"]}catch(e){}return!1}function initAttentionLayer(){var e=window.localStorage,a=!1,i=null;"true"!=(a=e.getItem("isCollect"))&&((i=$(".attention_layer")).show(),$(".gotIt_btn").on("click",function(){a=!0,_czc.push(["_trackEvent","web直播间","我要收藏_我知道了"]),i.hide(),e.setItem("isCollect",a)}),$(".attention_layer .leave_btn, .attention_layer .close_btn").on("click",function(){_czc.push(["_trackEvent","web直播间","我要收藏"]),i.hide()}))}function cancelAttention(){$cancelAttentionLayer=$(".cancel_attention_layer"),$cancelAttentionLayer.show(),$(".cancel_attention_layer .attention_btn, .cancel_attention_layer .close_btn").off().on("click","",function(){return $cancelAttentionLayer.hide(),!1}),$(".cancel_attention_layer").off().on("click",".cancel_btn",function(){$cancelAttentionLayer.hide(),setAttention(app.mid,function(){return!1},function(){app.isAttention=!1,$(".follow_m").removeClass("on"),$(".follow_m").html("<i>+</i>关注");var e=parseInt($(".mInfo_follow_num").text())-1;e=e>0?e:0,$(".mInfo_follow_num").text(e)})})}exports.onLogin=function(e){updateViewer(!0,e.oln),""!=app.uid&&(e.lowkeyEnter||((e.guardTimeType||e.level>=10||e.mountName)&&(0==loginAniArr.length&&showLoginEffect(e),loginAniArr.push(e)),addPublicRoomMsg(e,ROOM_USER_IN_MSG)))},exports.onLogout=function(e){updateViewer(!1,e.oln)},exports.onSendFlower=function(e,a,i){if(-100!=e){var t=parseInt(8*Math.random())+1,n=document.createElement("span");n.className="small_flower va_flower_"+t,$(".va_flower_wrap").append(n),fMove(n),updateFlowerNum(),moving_flower_num>50&&$(".va_flower_wrap span").eq(1).remove()}else ruser.showLoginPanel()},exports.onFirstSendFlower=function(e,a,i){0==e&&addPublicRoomMsg(i,ROOM_SEND_FLOWER_MSG)},exports.onGiftMsg=function(e,a,i){if(-100!=e)if(101!=e)if(103==e&&layer.tips(a),250!=e&&100!=e||layer.alert(a),0==e){if(0==e&&i.cost){var t=parseInt($("#xgNumber").text()),n=parseInt(t)+parseInt(i.cost);$("#xgNumber").text(n)}if(addPublicRoomMsg(i,ROOM_SEND_GIFT_MSG),showLight(i),void 0!=i.pcAnimationJsonUrl)for(var o=parseInt(i.animationTimes),s=0;s<o;s++)showSpecialEffects(i);if(i.pkgItemsetId){if(i.fromUid==app.uid){var l=$(".gifts_wrap li.active");app.backpackGifts[l.index()].num-=parseInt(i.num),0==app.backpackGifts[l.index()].num&&refreshBackpackGifts()}}else refreshCoin(i.fromUid,i.leftCoin,i.cost);if(3==i.ptype&&0!=i.giftBonus.bonus_times.length&&i.fromUid==app.uid&&goGiftBonus(i.giftBonus,i.fromUid,i.leftCoin,i.cost),$(".liveshowtask_wrap").is(":visible")&&liveShowTask.updateTaskInfo(i.pid,i.num,i.cost),15==i.ptype&&null!=app.pk.loserPunish&&app.isPlaying&&require.async("pkInvadePic",function(e){e.sendEraser(i)}),app.isSocialVideoRoom&&0!=i.pos){var c=$("#multiVideoMask li.li_"+(parseInt(i.pos)+3));i.costUser&&""!=i.costUser.headPic?(c.find(".mv_u_avatar").show().attr("src",i.costUser.headPic),c.find(".mv_coin span").text(i.modRank.sCost)):i.costUser&&""==i.costUser.headPic&&c.find(".mv_u_avatar").hide()}if(app.isSocialAudioRoom&&0!=i.pos){c=$("#multiAudioMask li.li_"+(parseInt(i.pos)+3));i.costUser&&c.find(".mv_coin span").text(i.modRank.sCost)}}else addPublicRoomMsg(a,ROOM_TIP_GIFT_MSG);else{var r=layer.tips('<p>抱歉，你的克拉不足！</p><div class="func"><a href="/recharge/center" target="_blank">去充值</a> <span>取消</span></div>',"#sendGift",{skin:"recharge_tip",tips:[1,"#fff"],time:4e8});$(".recharge_tip .func").on("click",function(){layer.close(r)})}else ruser.showLoginPanel()},exports.onSendAni=function(e,a,i){0==e&&showSpecialEffects(i)},exports.onPlayAnimation=function(e,a,i){0==e&&showSpecialEffects(i)},exports.showAvatarTipMoreFuns=function(){$(".o_more").toggle()},exports.talk_to_ta=function(e,a){var i=$("#msgTextarea"),t=getTrueNickName(a);i.val("").gjPlaceHolder({fontSize:"13px",placeHolderColor:"#999999",top:3,left:5,inputTextColor:"#333",content:"对 "+t+" 说",relParent:$(".rc_input_wrap")}),config.chatToUid=e,$(".rname").poshytip("hide"),$(".r_chat_close").show(),i.focus(),0!=$(".r_chat_controller li.active")&&switchToChat()},exports.ban=function(e,a,i,t,n){a>=11&&i==ROOM_ADMIN_USER?layer.msg("你无法禁言此等级的用户哦"):(message.sendData("ban",{banUid:e,expires:3600*parseInt(n)}),t.html("取消禁言").attr("onclick","room.unban(uid, $(this))"),$(".rname").poshytip("hide"))},exports.unban=function(e,a){message.sendData("unBan",{unBanUid:e}),a.html("禁言"+app.banTime+"小时").attr("onclick","room.ban(uid, $(this))"),$(".rname").poshytip("hide")},exports.onUserLevelIncrease=function(e,a,i){i.level>=5&&addPublicRoomMsg(i,ROOM_LEVEL_INCREASE_MSG)},exports.onModeratorLevelIncrease=function(e,a,i){i.moderatorLevel>19&&showModeratorIncreaseAnimation(i.nickname,i.moderatorLevel,i.moderatorLevelName)},exports.set_admin=function(e,a){$(".rname").poshytip("hide"),"设为管理"==$.trim(a.text())?$.ajax({url:"/roomV5/setAdmin",data:{mid:app.mid,setAdminUid:e},type:"GET",dataType:"JSON",success:function(e){0==e.errno?a.html("取消管理"):layer.msg(e.msg)}}):($.ajax({url:"/roomV5/unsetAdmin",data:{mid:app.mid,unsetAdminUid:e},type:"GET",dataType:"JSON",success:function(e){0==e.errno?a.html("设为管理"):layer.msg(e.msg)}}),updateAdminList(e))},exports.ti_room=function(e,a,i,t){message.sendData("ti",{tiUid:e,expires:7200}),$(".rname").poshytip("hide")},exports.onBan=function(e,a,i){e?addPublicRoomMsg(a,ROOM_TIP_MSG):app.uid==i.banUid?layer.msg("您已被管理员 "+i.operatorNickname+" 禁言"+app.banTime+"小时"):addPublicRoomMsg(i.banNickname+" 被管理员 "+i.operatorNickname+" 禁言"+app.banTime+"小时",ROOM_TIP_MSG)},exports.onUnBan=function(e,a,i){e?addPublicRoomMsg(a,ROOM_TIP_MSG):app.uid==i.unBanUid?layer.msg("您已被管理员 "+i.operatorNickname+" 解除禁言"):addPublicRoomMsg(i.unBanNickname+" 被管理员 "+i.operatorNickname+" 解除禁言",ROOM_TIP_MSG)},exports.onTi=function(e,a,i){e?addPublicRoomMsg(a,ROOM_TIP_MSG):app.uid==i.tiUid?(layer.alert("你已被 "+i.operatorNickname+" 踢出房间",{closeBtn:0,btn:"确定",title:!1,yes:function(){location.href="/"}}),closePlayer()):addPublicRoomMsg(i.tiNickname+" 被 "+i.operatorNickname+" 踢出房间",ROOM_TIP_MSG)},exports.onTiModerator=function(e,a,i){layer.alert(a,{skin:"left16"}),setTimeout(function(){closePlayer()},0)},exports.onUserAttention=function(e,a,i){var t=app.isSocialRoom?"主持人":"主播";addPublicRoomMsg(i.nickname+" 关注了"+t,ROOM_TIP_MSG),$(".mInfo_follow_num").text(parseInt($(".mInfo_follow_num").text())+1)},exports.onSetAdmin=function(e,a,i){e?addPublicRoomMsg(a,ROOM_TIP_MSG):app.uid==i.setAdminUid?(addPublicRoomMsg("您已被提升为管理员",ROOM_TIP_MSG),app.uType==ROOM_OFFICIAL?app.uType=ROOM_OFFICIAL_ADMIN:app.uType=ROOM_ADMIN_USER):addPublicRoomMsg(i.setAdminNickname+" 被提升为管理员",ROOM_TIP_MSG)},exports.onUnsetAdmin=function(e,a,i){e?addPublicRoomMsg(a,ROOM_TIP_MSG):app.uid==i.unsetAdminUid?(addPublicRoomMsg("您已被取消管理员",ROOM_TIP_MSG),app.uType==ROOM_OFFICIAL_ADMIN?app.uType=ROOM_OFFICIAL:app.uType=ROOM_COMMON_USER):addPublicRoomMsg(i.unsetAdminNickname+" 被取消管理员",ROOM_TIP_MSG)},exports.onSystemMsg=function(e,a,i){0==i.type?addPublicRoomMsg(a,8):layer.alert(a,{skin:"left16"})},exports.onConnectErrorStatus=function(e){var a="";switch(e.errno){case 100:a="重复登录";break;case 101:a="服务器超出最大用户数";break;case 102:a="禁止进入";break;case 103:a="系统错误";break;case 104:a="连接断开";break;case 105:return void alert("主播你好，由于你的违规直播，我们对你进行了下线操作，您可于次日再进行直播。希望您能遵守平台管理公约，共建和谐美好的"+config.siteKeyWords+"直播。");case 106:return void alert("主播你好，由于你违背了"+config.siteKeyWords+"直播平台管理公约，所以今日无法继续在"+config.siteKeyWords+"直播。请遵守《"+config.siteKeyWords+"直播服务条例》的相关规定，避免今后出现违规直播的现象。")}addPublicRoomMsg("消息服务连接失败:"+a,ROOM_TIP_MSG)},exports.onConnectStatus=function(e,a,i){101==e?app.uType==ROOM_MODERATOR_USER||app.uType==ROOM_OWN_USER?layer.alert("主播你好，由于你违背了"+config.siteKeyWords+"直播平台管理公约，所以今日无法继续在"+config.siteKeyWords+"直播。请遵守《"+config.siteKeyWords+"直播服务条例》的相关规定，避免今后出现违规直播的现象。",{skin:"left16"}):layer.alert("您已被管理员踢出房间，暂时无法进入"):addPublicRoomMsg(a,ROOM_TIP_MSG),setTimeout(function(){closePlayer()},0)},exports.onConnectSuccess=function(){addPublicRoomMsg("视频服务连接成功",ROOM_TIP_MSG)},exports.onConnectRejected=function(){addPublicRoomMsg("视频服务连接已拒绝",ROOM_TIP_MSG)},exports.onConnectClosed=function(){addPublicRoomMsg("视频服务连接已断开",ROOM_TIP_MSG)},exports.onConnectFailed=function(){addPublicRoomMsg("视频服务连接已失败",ROOM_TIP_MSG)},exports.onConnectAppShutDown=function(){addPublicRoomMsg("视频服务服务已关闭",ROOM_TIP_MSG)},exports.onConnectCallFailed=function(){addPublicRoomMsg("视频服务远程调用失败",ROOM_TIP_MSG)},exports.onVideoReplay=function(){addPublicRoomMsg("视频重新播放开始",ROOM_TIP_MSG)},exports.onVideoPlay=function(){addPublicRoomMsg("视频播放开始",ROOM_TIP_MSG)},exports.onVideoStop=function(){addPublicRoomMsg("视频播放结束",ROOM_TIP_MSG)},exports.onVideoUnpublishSuccess=function(){addPublicRoomMsg("视频发布结束",ROOM_TIP_MSG),message.sendData("videoUnpublish",{})},exports.onVideoPublishSuccess=function(){addPublicRoomMsg("视频发布成功",ROOM_TIP_MSG),message.sendData("videoPublish",{})},exports.onException=function(e){console.log("onException:",e)},exports.passConnectStatus=function(e){app.uid==app.mid?e?swfobject.getObjectById(config.player.flashId)&&swfobject.getObjectById(config.player.flashId).onMessageConnectSuccess?swfobject.getObjectById(config.player.flashId).onMessageConnectSuccess():setTimeout(function(){room.passConnectStatus(e)},100):swfobject.getObjectById(config.player.flashId)&&swfobject.getObjectById(config.player.flashId).onMessageConnectClose?swfobject.getObjectById(config.player.flashId).onMessageConnectClose():setTimeout(function(){room.passConnectStatus(e)},100):e||closePlayer()},exports.onVideoPublishForAudience=function(e,a,i){if(e)return addPublicRoomMsg("发布视频失败:"+a),void closePlayer();if(app.isPlaying=!0,app.uType!==ROOM_OWN_USER&&app.uType!==ROOM_MODERATOR_USER){initPlayer(),initFlower(),hideRecommendPlaying(),isVideoRoom()||function e(){swfobject.getObjectById(config.player.flashId)&&swfobject.getObjectById(config.player.flashId).onVideoPublish?swfobject.getObjectById(config.player.flashId).onVideoPublish():setTimeout(function(){e()},100)}();var t=app.pk;null!=t.loserPunish&&showEraser(t)}app.isHotRoom&&!app.isSocialRoom&&($(".timeZoneHotList_btn").show(),initNewHotRankInfo(app.timeZoneHotListRankInfo))},exports.onVideoUnpublishForAudience=function(e,a,i){app.isPlaying=!1,isVideoRoom()||swfobject.getObjectById(config.player.flashId).onVideoUnpublish(),app.uType!==ROOM_OWN_USER&&app.uType!==ROOM_MODERATOR_USER&&(showRecommendPlaying(),closePlayer(),$(".va_controller").hide(),$(".va_flower_wrap").hide()),0!=$(".timeZoneHotList_btn").length&&$(".timeZoneHotList_btn").hide(),app.pk.isPk&&($(".pk_time_title").hide(),$(".pk_progress").hide(),$(".pk_opp_nick").hide()),$(".progressbar").remove()},exports.onChangeVideoPullUrl=function(e,a,i){0==e&&setPlayUrl({rtmpUrl:i.pullUrl})},exports.debug=function(e){if(console&&console.log)if("string"==typeof e){var a=new Date;console.log(a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()+" "+e)}else console.log(e)},exports.onSRCloVoice=function(e,a,i){0==e&&$(i).each(function(e,a){$(".multi_social li.li_"+(parseInt(a.position)+3)).find(".mv_ban").show()})},exports.onSROpenVoice=function(e,a,i){0==e&&$(i).each(function(e,a){$(".multi_social li.li_"+(parseInt(a.position)+3)).find(".mv_ban").hide()})},exports.onSocialResult=function(e,a,i){if(0==e&&($(".multi_social li .mv_coin span").text("0"),app.isSocialVideoRoom&&$("#multiVideoMask li .mv_u_avatar").hide()),0==e&&1==i.hasRank){var t='<p class="social_end">                            <span class="social_end_name_l">获胜主播</span>                            <span class="social_end_name_c"></span>                            <span class="social_end_name_r">获胜用户</span>                        </p>';$(i.winner).each(function(e,a){$(".multi_social li.li_"+(parseInt(a.position)+3)).find(".mv_game_result_icon_1").show(),t+='<p class="social_end">                            <span class="social_end_name_l">'+a.nickname+'</span>                            <span class="social_end_name_c">&</span>                            <span class="social_end_name_r">'+a.userNickname+"</span>                        </p>"}),$(i.loser).each(function(e,a){$(".multi_social li.li_"+(parseInt(a.position)+3)).find(".mv_game_result_icon_0").show()}),setTimeout(function(){$(".multi_social li").find(".mv_game_result_icon").hide(),checkSwfQueue("https://static.guojiang.tv/src/pc/img/room/svg/socialSuccess/data.json",6e3,"svg","social_end_wrap",function(){t='<div class="social_end_nickname">'+t+"</div>",setTimeout(function(){$("#seSvgObj").append(t)},200)})},3e3)}0==e&&1==i.isLast&&closeSocialRoom()},exports.onSROfflineClo=function(e,a,i){closeSocialRoom()},exports.onSRMixSuccess=function(e,a,i){0==e&&(1==i.eType?0==i.position?openSocialRoom(i.socialType):(addModeratorToMultiVideo(i),2==i.socialType&&initModeratorAudio(i)):removeModeratorFromMultiVideo(i))},exports.onSRMixFail=function(e,a,i){0==e&&removeModeratorFromMultiVideo(i)},exports.showNewHotRank=function(e){$(".timeZoneHotList_btn").show(),initNewHotRankInfo(e)};var _cancelTimer=null;function initAttentionBtn(){if(!app.isAttention&&!app.isSocialRoom){_cancelTimer=setTimeout(function(){$("#chatArea").append('<span id="attention-span">点击+关注，转粉主播不迷路~</span>'),$("#attention-span").off().on("click",function(){setAttention(app.mid,function(){$(".follow_m").addClass("on"),$(".follow_m").html("已关注"),$("#attention-span").remove(),message.sendData("userAttention")},function(){return!1})})},15e3)}}function setAttention(e,a,i){$.ajax({url:"/roomV5/follow/mid/"+e,dataType:"json",success:function(e){0==e.errno?"love"==e.data.action?a():i():layer.alert(e.msg)}})}function getfansGifts(e,a,i){$.ajax({url:"/roomV5/getFansGifts",data:{uid:e,mid:a},dataType:"json",success:function(e){0==e.errno?(app.fansGifts=e.data.fansGifts,i()):console.log(e.msg)}})}exports.onBeFans=function(e,a,i){if(0==e){var t=$(".gifts_type span[data-target='fans']");app.medalList.leftMedal-=1,getfansGifts(app.uid,app.mid,function(){app.isModFans="true",t.hasClass("active")&&t.click()}),require.async("fansMedal",function(e){e.beFansCallback(app.mid)});var n='<div class="content">                            <p class="p-1">恭喜您<br/>获得<span>'+i.medal+'</span>徽章</p>                            <p class="p-2">您可以通过“<span>聊天输入框左边徽章入口</span>”佩戴徽章，也可以通过“<span>个人中心-我的粉丝徽章</span>”页面佩戴徽章。</p>                            <p class="p-3">每天送礼物都会提升徽章等级和获得更丰厚的礼包哦~</p>                            <img src="//static.guojiang.tv/pc/v3/img/common/layer_bg.png">                            <p class="p-4" onClick="layer.closeAll()"><span>朕知道了</span></p>                            <span class="span-1"></span><span class="sapn-2"></span>                        </div>';layer.open({skin:"first-send-medal-layer",type:1,content:n,area:["270px","336px"],closeBtn:!1,border:[0],closeBtn:0})}},exports.limitSendFansGift=function(){config.sendMedalLimit=!0;var e=layer.open({skin:"send-fans-gift-layer",content:"您的粉丝徽章已达上限，送出该礼物后无法获得主播的粉丝徽章和特权哦~",btn:["取消","继续送礼"],yes:function(){layer.close(e)},btn2:function(){var e=$("#propNum"),a=e.gjRegExpTest({type:"number",content:e.val()});if(a.code){var i=parseInt(e.val());message.sendData("sendGift",{pid:525,pkgItemsetId:"",num:i})}else layer.alert(a.msg,{title:!1})}})},exports.beFansAction=function(){app.medalList.leftMedal<=0&&!config.sendMedalLimit?room.limitSendFansGift():message.sendData("sendGift",{pid:525,pkgItemsetId:"",num:1})},exports.onFansLevelUp=function(e,a,i){var t=$("#chatArea");0==e&&t.append("<p class='fans_level_up_p'>"+i.msg+"</p>")},exports.onIntimacyDown=function(){var e='<div class="intimacy_layer">                    <span class="close"></span>                    <p>您与<span>'+app.mInfo.m.nickname+"</span>的亲密度已开始下降，亲密度下降到0时，您将失去ta的粉丝徽章。去给ta刷礼物可以提升亲密度哦~</p>                  </div>";$(".c_wrap").append(e),$(".intimacy_layer .close").on("click",function(){$(".intimacy_layer").hide()})},exports.sendRedPacketGift=function(e,a,i,t){if(app.isSocialRoom){var n=$(".gs_desc"),o=n.attr("data-mid");if(""==o)return void layer.alert("该位置没有嘉宾在线",{title:!1});var s=n.attr("data-pos");message.sendData("sendSocialGift",{mid:o,pos:s,pid:e,pkgItemsetId:t,num:a,boxCommand:i})}else message.sendData("sendGift",{pid:e,num:a,boxCommand:i,pkgItemsetId:t})},exports.sendNormalGifts=function(e,a,i){if(app.isSocialRoom){var t=$(".gs_desc"),n=t.attr("data-mid");if(""==n)return void layer.alert("该位置没有嘉宾在线",{title:!1});var o=t.attr("data-pos");message.sendData("sendSocialGift",{mid:n,pos:o,pid:e,pkgItemsetId:i,num:a})}else message.sendData("sendGift",{pid:e,pkgItemsetId:i,num:a})},exports.onNewRedPacketBox=function(e,a,i){0==e&&initRedPacketBox(i)},exports.onRedPacketBoxExpire=function(e,a,i){if(0==e)for(var t=0;t<rStatus.redPacket.boxList.length;t++)for(var n=0;n<i.length;n++)if(rStatus.redPacket.boxList[t].boxId==i[n].boxId){rStatus.redPacket.boxList.splice(t,1);var o=rStatus.redPacket.boxList.length;if($(".word_redpacket_entry .box_num i").text(o),0==o){$(".redpacket_box_wrap").hide();break}}},exports.onBroadcast=function(e,a,i){if(0==e){var t=i.cardNum;app.userBroadcastCard.cardNum=t,$(".broadcastCard-num-wrap i").html(t),$(".broadcastCard-num").html("x"+t),0==t&&($(".broadcastCard-num").hide(),$(".broadcastCard-content").attr("placeholder","发送全站直播间广播，9999克拉/条。"))}else if(101==e)layer.open({title:"广播发送失败",skin:"broadcastCard-layer",content:"您的克拉余额不足，请充值或者去商城购买后再次尝试",btn:["去充值","去商城"],closeBtn:2,yes:function(){window.open("/recharge/center")},btn2:function(){window.open("/store")}});else $broadcastTooltip=$(".broadcast-tooltip"),$(".broadcast-tooltip .tooltip-content").html(a),$broadcastTooltip.show(),setTimeout(function(){$broadcastTooltip.hide()},2e3)};var $pkProgress=$(".pk_progress"),$pkProgressLeft=$(".pk_progress .left"),$pkProgressRight=$(".pk_progress .right"),$myScore=$(".pk_progress .my-side span"),$otherScore=$(".pk_progress .other-side span"),$pkOppNick=$(".pk_opp_nick"),pkTimer,punishTimer;function initPk(e){null!=app.pk.loserPunish&&app.isPlaying&&showEraser(app.pk);e.isPk&&(getPkStatus(),$pkProgress.fadeIn(300),$pkOppNick.fadeIn(300).html(e.otherNickname),app.uid==app.mid?$pkOppNick.attr("href","javascript:void(0);"):$pkOppNick.attr("href","/"+e.currentScore.otherMid),changePkProgress(e.currentScore))}var winnerMsg="";function getPkStatus(){$.ajax({url:"/pk/pkStatus",data:{rid:app.rid},type:"GET",dataType:"JSON",success:function(e){var a=e.data.currentPkTime;winnerMsg=e.data.winnerMsg,a>0?($(".pk_last_time").show(),$(".pk_last_time").find("span").text(a),pkTimer&&clearInterval(pkTimer),pkTimer=setInterval(function(){a--,$(".pk_last_time").find("span").text(a),a<=0&&(a=0,$(".pk_last_time").find("span").text(a),$(".pk_last_time").hide(),clearInterval(pkTimer))},1e3)):(punishCountTime=e.data.currentPunishTime,punishCountTime>0&&($(".pk_title_time").show(),$(".pk_title_time").find("span").text(punishCountTime),punishTimer&&clearInterval(punishTimer),punishTimer=setInterval(function(){punishCountTime--,$(".pk_title_time").find("span").text(punishCountTime),punishCountTime<=0&&(punishCountTime=0,$(".pk_title_time").find("span").text(punishCountTime),$(".pk_title_time").hide(),clearInterval(punishTimer))},1e3)))}})}function changePkProgress(e){var a=~~e.myScore+~~e.otherScore,i=~~e.myScore,t=~~e.otherScore,n=i/a*100,o=t/a*100;0==a?($pkProgressLeft.css("width","50%"),$pkProgressRight.css("width","50%")):a>0&&(0==n&&(n=5,o=95),0==o&&(n=95,o=5),$pkProgressLeft.css("width",n+"%"),$pkProgressRight.css("width",o+"%")),$myScore.html(i),$otherScore.html(t)}function showEraser(e){require.async("pkInvadePic",function(a){a.showEraser(e)})}function setPlayUrl(e){fplayer&&fplayer.reload&&fplayer.reload(e.rtmpUrl,e.headPic),vplayer&&vplayer.reload&&vplayer.reload(e.flvUrl,e.headPic)}exports.onPKGift=function(e,a,i){0==e&&changePkProgress(i)},exports.onPKStart=function(e,a,i){if(0==e){setPlayUrl({rtmpUrl:i.playUrl,flvUrl:i.playUrlFlv,headPic:i.headPic}),app.pk.isPk=!0,changePkProgress(i),$pkProgress.fadeIn(300),$pkOppNick.fadeIn(300).html(i.otherNickname),app.uid==app.mid?$pkOppNick.attr("href","javascript:void(0);"):$pkOppNick.attr("href","/"+i.otherMid),$(".pk_count_time").text(5),$(".pk_count_time").show();var t=$(".pk_count_time").text(),n=setInterval(function(){t--,$(".pk_count_time").text(t),t<=0&&(clearInterval(n),$(".pk_count_time").hide(),getPkStatus())},1e3,function(){$(".pk_count_time").text("")})}},exports.onPKEnd=function(e,a,i){if(0==e&&(pkTimer&&clearInterval(pkTimer),punishTimer&&clearInterval(punishTimer),$(".pk_last_time").find("span").text(""),$(".pk_title_time").find("span").text(""),$(".pk_last_time").hide(),$(".pk_title_time").hide(),setPlayUrl({rtmpUrl:i.playUrl,flvUrl:i.playUrlFlv,headPic:i.headPic}),app.pk.isPk=!1,$pkProgress.hide(),$pkOppNick.hide().html(""),i.endMid&&i.show_punish))if(app.mid!=i.endMid)addPublicRoomMsg(i.msg,8);else{$(".progressbar").remove();var t={loserPunish:{gift:0},clearCount:app.pk.clearCount};app.pk.loserPunish=t,showEraser(t)}},exports.pkResult=function(e,a,i){if(0==e)if(getPkStatus(),i.winner==app.mid)addPublicRoomMsg(winnerMsg,8);else if(0!=i.winner){$(".progressbar").remove();var t={loserPunish:{gift:0},clearCount:app.pk.clearCount};app.pk.loserPunish=t,showEraser(t)}},$(".game-entry").on("click",function(e){"game-entry"==e.target.className&&$(".game-outer").is(":hidden")&&require.async("gjGame",function(e){e.initGame()})}),common.addEvents(window,"message",function(e){"closeFish"==e.data.flag?($(".game-box")[0].src="",$(".game-iframe").hide(),$(".game-outer").show()):"recharge"==e.data.flag&&require.async("gjGame",function(e){e.noMoney()})},!1);var public_key="-----BEGIN PUBLIC KEY-----MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAzAVxbLG88ag2xMw1WDyCMqVM2oydRFe75Jy8ZgocxftIBWEKLA+VhnL/j2V+dFTzUZVF9xTG6FS7cE6bSgh57UtZc83ORwCmTZCOUh231XAF6KBIa6sJspRbBf0m4j6FE4vvIYbri7ZOduMpgU3em8XP9zB49xN3nV/4V/BCyrPuaFO3uR9KMgcBm+ELJdU7StGyCPYn7jxXdKM+InBDizz5FjmpSX/W9L02sNYF9imd6da46Qiy69Vt4U5pJ7yqePykxxoHTp0h6nco3si2YL6VRgaqEkjzbQ+kDG6jbZZKf8qGj84uEsNH5oezSQMCDVc60zzlWpAp+f9h4TkNbQIDAQAB-----END PUBLIC KEY-----";function activeIconPlayer(e,a,i,t){var n,o=null,s=1,l=$(e).find(a).find(".slide-per").length;if(1==i)n=$(e).find(a).width(),s=l;else if(n=t||$(e).find(".slide-content").children(".slide-per").width(),(s=$(e).find(".slide-content").children(".slide-per").length)>i){var c=parseInt(s/i);s=c>0&&0!=s%i?c+1:c}else s=1;$(e).find(a).scrollLeft();var r=l*n,p=0;function d(){o=setInterval(function(){p<l-i?p++:p=0,m()},5e3)}function m(){$(e).find(a).animate({scrollLeft:p*n},150),$(e).find(".slide-dot").eq(p).addClass("active-slide-dot").siblings().removeClass("active-slide-dot")}$(e).find(".slide-content").width(r),l>=2&&$(e).find(".slide-dot").eq(0).addClass("active-slide-dot"),d(),$(e).find(".slide-next").on("click",function(){o&&clearInterval(o),p<l-i?p++:p=0,m(),d()}),$(e).find(".slide-pre").on("click",function(){o&&clearInterval(o),p>0&&p<=l-i?p--:p=l-i,m(),d()}),$(e).find(".slide-dot").on("click",function(){o&&clearInterval(o);var e=$(this).index();p=e,m(),d()}),s<=1&&($(e).find(".slide-point").hide(),$(e).find(".slide-btn").hide()),$(e).hover(function(){s>1&&$(e).find(".slide-btn").show()},function(){$(e).find(".slide-btn").hide()})}exports.public_key=public_key,exports.activeIconPlayer=activeIconPlayer}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}]);